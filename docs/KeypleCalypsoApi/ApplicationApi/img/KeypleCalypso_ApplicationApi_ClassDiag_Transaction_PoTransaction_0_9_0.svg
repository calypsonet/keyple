<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2373.6px" preserveAspectRatio="none" style="width:1456px;height:2373px;" version="1.1" viewBox="0 0 1456 2373" width="1456.8px" zoomAndPan="magnify"><defs/><g><!--MD5=[a0ee729f83dda31870600cae83338b00]
cluster org.keyple.calypso--><polygon fill="#FFFFFF" points="26.4,28.8,190.8,28.8,199.2,57.1313,1430.4,57.1313,1430.4,2359.2,26.4,2359.2,26.4,28.8" style="stroke: #000000; stroke-width: 1.7999999999999998;"/><line style="stroke: #000000; stroke-width: 1.7999999999999998;" x1="26.4" x2="199.2" y1="57.1313" y2="57.1313"/><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157.2" x="31.2" y="48.6398">org.keyple.calypso</text><!--MD5=[f9c58d90839a0c7c212d8c6553ac9eb7]
cluster transaction--><polygon fill="#FFFFFF" points="55.2,81.6,157.2,81.6,165.6,109.9312,1401.6,109.9312,1401.6,2175.6,55.2,2175.6,55.2,81.6" style="stroke: #000000; stroke-width: 1.7999999999999998;"/><line style="stroke: #000000; stroke-width: 1.7999999999999998;" x1="55.2" x2="165.6" y1="109.9312" y2="109.9312"/><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94.8" x="60" y="101.4398">transaction</text><!--MD5=[858307e347215d8034d295bce1f15f07]
class SelectFileControl--><rect fill="#FEFECE" height="107.4094" id="SelectFileControl" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="164.4" x="1011" y="2232"/><ellipse cx="1029" cy="2251.2" fill="#EB937F" rx="13.2" ry="13.2" style="stroke: #EB93DF; stroke-width: 1.2;"/><path d="M1027.2,2252.4 L1027.2,2254.8 L1032,2254.8 L1032,2253.6 L1032,2253.0187 L1032.75,2252.4 L1033.2,2252.4 L1033.65,2252.4 L1034.4,2253.0187 L1034.4,2253.6 L1034.4,2257.2 L1024.8,2257.2 L1024.2188,2257.2 L1023.6,2256.45 L1023.6,2256 L1023.6,2255.55 L1024.2188,2254.8 L1024.8,2254.8 L1024.8,2254.8 L1024.8,2247.6 L1024.8,2247.6 L1024.2188,2247.6 L1023.6,2246.85 L1023.6,2246.4 L1023.6,2245.95 L1024.2188,2245.2 L1024.8,2245.2 L1034.4,2245.2 L1034.4,2248.8 L1034.4,2249.3813 L1033.65,2250 L1033.2,2250 L1032.75,2250 L1032,2249.3813 L1032,2248.8 L1032,2247.6 L1027.2,2247.6 L1027.2,2250 L1028.4,2250 L1028.4,2249.4188 L1028.4,2249.4188 L1029.15,2248.8 L1029.6,2248.8 L1030.05,2248.8 L1030.8,2249.4188 L1030.8,2250 L1030.8,2252.4 L1030.8,2252.9813 L1030.05,2253.6 L1030.05,2253.6 L1029.6,2253.6 L1029.15,2253.6 L1028.4,2252.9813 L1028.4,2252.9813 L1028.4,2252.4 L1027.2,2252.4 Z "/><ellipse cx="1051.8" cy="2250.6" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="112.8" x="1059" y="2257.0922">SelectFileControl</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="1012.2" x2="1174.2" y1="2270.4" y2="2270.4"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="58.8" x="1018.2" y="2288.9027">FIRST_EF,</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="56.4" x="1018.2" y="2305.5059">NEXT_EF,</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="79.2" x="1018.2" y="2322.109">CURRENT_DF</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="1012.2" x2="1174.2" y1="2329.8094" y2="2329.8094"/><!--MD5=[ee0d3336d8d2c9dd88a5ad188defe636]
class ChannelControl--><rect fill="#FEFECE" height="90.8062" id="ChannelControl" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="156" x="1218" y="2240.4"/><ellipse cx="1236" cy="2259.6" fill="#EB937F" rx="13.2" ry="13.2" style="stroke: #EB93DF; stroke-width: 1.2;"/><path d="M1234.2,2260.8 L1234.2,2263.2 L1239,2263.2 L1239,2262 L1239,2261.4188 L1239.75,2260.8 L1240.2,2260.8 L1240.65,2260.8 L1241.4,2261.4188 L1241.4,2262 L1241.4,2265.6 L1231.8,2265.6 L1231.2188,2265.6 L1230.6,2264.85 L1230.6,2264.4 L1230.6,2263.95 L1231.2188,2263.2 L1231.8,2263.2 L1231.8,2263.2 L1231.8,2256 L1231.8,2256 L1231.2188,2256 L1230.6,2255.25 L1230.6,2254.8 L1230.6,2254.35 L1231.2188,2253.6 L1231.8,2253.6 L1241.4,2253.6 L1241.4,2257.2 L1241.4,2257.7813 L1240.65,2258.4 L1240.2,2258.4 L1239.75,2258.4 L1239,2257.7813 L1239,2257.2 L1239,2256 L1234.2,2256 L1234.2,2258.4 L1235.4,2258.4 L1235.4,2257.8188 L1235.4,2257.8188 L1236.15,2257.2 L1236.6,2257.2 L1237.05,2257.2 L1237.8,2257.8188 L1237.8,2258.4 L1237.8,2260.8 L1237.8,2261.3813 L1237.05,2262 L1237.05,2262 L1236.6,2262 L1236.15,2262 L1235.4,2261.3813 L1235.4,2261.3813 L1235.4,2260.8 L1234.2,2260.8 Z "/><ellipse cx="1258.8" cy="2259" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="104.4" x="1266" y="2265.4922">ChannelControl</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="1219.2" x2="1372.8" y1="2278.8" y2="2278.8"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="69.6" x="1225.2" y="2297.3027">KEEP_OPEN</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="87.6" x="1225.2" y="2313.9059">CLOSE_AFTER</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="1219.2" x2="1372.8" y1="2321.6063" y2="2321.6063"/><!--MD5=[4ea882bf7bd4263b7e27aeb216026ca4]
class PoSecuritySettingBuilder--><rect fill="#FEFECE" height="356.4563" id="PoSecuritySettingBuilder" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="583.2" x="236.4" y="124.8"/><ellipse cx="399.9" cy="144" fill="#ADD1B2" rx="13.2" ry="13.2" style="stroke: #ADD1B2; stroke-width: 1.2;"/><path d="M402.3,139.8 Q402.5438,139.2 402.825,138.9 Q403.1063,138.6 403.425,138.6 Q403.9875,138.6 404.3438,138.9375 Q404.7,139.275 404.7,140.0625 L404.7,141.9375 Q404.7,142.725 404.3625,143.0625 Q404.025,143.4 403.5,143.4 Q403.0313,143.4 402.7313,143.1938 Q402.4313,142.9875 402.3,142.4438 Q402.2438,142.0688 402.0375,141.8625 Q401.6625,141.4688 400.9875,141.2438 Q400.3125,141 399.6375,141 Q398.7938,141 398.0813,141.3375 Q397.3875,141.675 396.8438,142.425 Q396.3,143.175 396.3,144.2062 L396.3,145.3125 Q396.3,146.55 397.3125,147.375 Q398.325,148.2 400.125,148.2 Q401.1937,148.2 401.9437,147.9562 Q402.375,147.825 402.8625,147.3937 Q403.1813,147.15 403.35,147.075 Q403.5188,147 403.725,147 Q404.1188,147 404.4,147.3188 Q404.7,147.6188 404.7,148.05 Q404.7,148.4625 404.2875,148.95 Q403.6875,149.6625 402.7313,150.0563 Q401.475,150.6 399.9375,150.6 Q398.1375,150.6 396.6937,149.8875 Q395.5313,149.325 394.7063,148.1063 Q393.9,146.8875 393.9,145.4438 L393.9,144.1313 Q393.9,142.6313 394.6125,141.3188 Q395.3438,140.0063 396.6,139.3125 Q397.875,138.6 399.3,138.6 Q400.1625,138.6 400.9125,138.9 Q401.6625,139.2 402.3,139.8 Z "/><ellipse cx="430.5" cy="143.4" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="34.8" x="437.7" y="149.8922">static</text><text fill="#000000" font-family="sans-serif" font-size="14.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28.8" x="476.1" y="149.8922">final</text><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="162" x="508.5" y="149.8922">PoSecuritySettingBuilder</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="237.6" x2="818.4" y1="163.2" y2="163.2"/><rect fill="none" height="7.2" style="stroke: #C82930; stroke-width: 1.2;" width="7.2" x="246" y="172.8"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="270" x="260.4" y="181.7027">final SeResource&lt;CalypsoSam&gt; samResource</text><rect fill="none" height="7.2" style="stroke: #C82930; stroke-width: 1.2;" width="7.2" x="246" y="189.4031"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="169.2" x="260.4" y="198.3059">List&lt;Byte&gt; authorizedKvcList</text><rect fill="none" height="7.2" style="stroke: #C82930; stroke-width: 1.2;" width="7.2" x="246" y="206.0063"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="266.4" x="260.4" y="214.909">final EnumMap&lt;AccessLevel, Byte&gt; defaultKif</text><rect fill="none" height="7.2" style="stroke: #C82930; stroke-width: 1.2;" width="7.2" x="246" y="222.6094"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="273.6" x="260.4" y="231.5121">final EnumMap&lt;AccessLevel, Byte&gt; defaultKvc</text><rect fill="none" height="7.2" style="stroke: #C82930; stroke-width: 1.2;" width="7.2" x="246" y="239.2125"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="360" x="260.4" y="248.1152">final EnumMap&lt;AccessLevel, Byte&gt; defaultKeyRecordNumber</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="309.6" x="260.4" y="264.7184">ModificationMode sessionModificationMode = ATOMIC</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="304.8" x="260.4" y="281.3215">RatificationMode ratificationMode = CLOSE_RATIFIED</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="237.6" x2="818.4" y1="289.0219" y2="289.0219"/><ellipse cx="249.6" cy="302.2219" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="393.6" x="260.4" y="307.5246">PoSecuritySettingBuilder(SeResource&lt;CalypsoSam&gt; samResource)</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="0" x="264" y="324.1277"/><ellipse cx="249.6" cy="335.4281" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="548.4" x="260.4" y="340.7309">PoSecuritySettingBuilder sessionModificationMode(ModificationMode sessionModificationMode)</text><ellipse cx="249.6" cy="352.0313" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="435.6" x="260.4" y="357.334">PoSecuritySettingBuilder ratificationMode(RatificationMode ratificationMode)</text><ellipse cx="249.6" cy="368.6344" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="508.8" x="260.4" y="373.9371">PoSecuritySettingBuilder sessionDefaultKif(AccessLevel sessionAccessLevel, byte kif)</text><ellipse cx="249.6" cy="385.2375" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="523.2" x="260.4" y="390.5402">PoSecuritySettingBuilder sessionDefaultKvc(AccessLevel sessionAccessLevel, byte kvc)</text><ellipse cx="249.6" cy="401.8406" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="552" x="260.4" y="407.1434">PoSecuritySettingBuilder sessionDefaultKeyRecordNumber(AccessLevel sessionAccessLevel,</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="140.4" x="260.4" y="423.7465">byte keyRecordNumber)</text><ellipse cx="249.6" cy="435.0469" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="476.4" x="260.4" y="440.3496">PoSecuritySettingBuilder sessionAuthorizedKvcList(List&lt;Byte&gt; authorizedKvcList)</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="0" x="264" y="456.9527"/><ellipse cx="249.6" cy="468.2531" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="141.6" x="260.4" y="473.5559">PoSecuritySetting build()</text><!--MD5=[e4d4ea7db949ad9d239210033b878e09]
class PoSecuritySetting--><rect fill="#FEFECE" height="273.4406" id="PoSecuritySetting" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="392.4" x="346.2" y="574.8"/><ellipse cx="456.9" cy="594" fill="#ADD1B2" rx="13.2" ry="13.2" style="stroke: #ADD1B2; stroke-width: 1.2;"/><path d="M459.3,589.8 Q459.5438,589.2 459.825,588.9 Q460.1063,588.6 460.425,588.6 Q460.9875,588.6 461.3438,588.9375 Q461.7,589.275 461.7,590.0625 L461.7,591.9375 Q461.7,592.725 461.3625,593.0625 Q461.025,593.4 460.5,593.4 Q460.0313,593.4 459.7313,593.1938 Q459.4313,592.9875 459.3,592.4438 Q459.2438,592.0688 459.0375,591.8625 Q458.6625,591.4688 457.9875,591.2438 Q457.3125,591 456.6375,591 Q455.7938,591 455.0813,591.3375 Q454.3875,591.675 453.8438,592.425 Q453.3,593.175 453.3,594.2063 L453.3,595.3125 Q453.3,596.55 454.3125,597.375 Q455.325,598.2 457.125,598.2 Q458.1937,598.2 458.9437,597.9563 Q459.375,597.825 459.8625,597.3938 Q460.1813,597.15 460.35,597.075 Q460.5188,597 460.725,597 Q461.1188,597 461.4,597.3188 Q461.7,597.6188 461.7,598.05 Q461.7,598.4625 461.2875,598.95 Q460.6875,599.6625 459.7313,600.0563 Q458.475,600.6 456.9375,600.6 Q455.1375,600.6 453.6937,599.8875 Q452.5313,599.325 451.7063,598.1062 Q450.9,596.8875 450.9,595.4438 L450.9,594.1313 Q450.9,592.6313 451.6125,591.3188 Q452.3438,590.0063 453.6,589.3125 Q454.875,588.6 456.3,588.6 Q457.1625,588.6 457.9125,588.9 Q458.6625,589.2 459.3,589.8 Z "/><ellipse cx="487.5" cy="593.4" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="14.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28.8" x="494.7" y="599.8922">final</text><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="115.2" x="527.1" y="599.8922">PoSecuritySetting</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="347.4" x2="737.4" y1="613.2" y2="613.2"/><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="347.4" x2="737.4" y1="622.8" y2="622.8"/><ellipse cx="359.4" cy="636" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="280.8" x="370.2" y="641.3027">PoSecuritySetting(SamResource samResource);</text><polygon fill="#FFFF44" points="359.4,646.6031,364.2,651.4031,359.4,656.2031,354.6,651.4031" style="stroke: #B38D22; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="277.2" x="370.2" y="657.9059">ModificationMode getSessionModificationMode()</text><polygon fill="#FFFF44" points="359.4,663.2063,364.2,668.0063,359.4,672.8063,354.6,668.0063" style="stroke: #B38D22; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="267.6" x="370.2" y="674.509">RatificationMode getSessionRatificationMode()</text><polygon fill="#FFFF44" points="359.4,679.8094,364.2,684.6094,359.4,689.4094,354.6,684.6094" style="stroke: #B38D22; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="267.6" x="370.2" y="691.1121">Byte getSessionDefaultKif(AccessLevel level)</text><polygon fill="#FFFF44" points="359.4,696.4125,364.2,701.2125,359.4,706.0125,354.6,701.2125" style="stroke: #B38D22; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="274.8" x="370.2" y="707.7152">Byte getSessionDefaultKvc(AccessLevel level)</text><polygon fill="#FFFF44" points="359.4,713.0156,364.2,717.8156,359.4,722.6156,354.6,717.8156" style="stroke: #B38D22; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="361.2" x="370.2" y="724.3184">Byte getSessionDefaultKeyRecordNumber(AccessLevel level)</text><polygon fill="#FFFF44" points="359.4,729.6188,364.2,734.4187,359.4,739.2188,354.6,734.4187" style="stroke: #B38D22; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="252" x="370.2" y="740.9215">Boolean isSessionKvcAuthorized(byte kvc)</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="0" x="373.8" y="757.5246"/><polygon fill="#FFFF44" points="359.4,762.825,364.2,767.625,359.4,772.425,354.6,767.625" style="stroke: #B38D22; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="280.8" x="370.2" y="774.1277">PinTransmissionMode getPinTransmissionMode()</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="0" x="373.8" y="790.7309"/><polygon fill="#FFFF44" points="359.4,796.0313,364.2,800.8313,359.4,805.6313,354.6,800.8313" style="stroke: #B38D22; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="201.6" x="370.2" y="807.334">LogRead getSvGetLogReadMode()</text><polygon fill="#FFFF44" points="359.4,812.6344,364.2,817.4344,359.4,822.2344,354.6,817.4344" style="stroke: #B38D22; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="241.2" x="370.2" y="823.9371">NegativeBalance getSvNegativeBalance()</text><polygon fill="#FFFF44" points="359.4,829.2375,364.2,834.0375,359.4,838.8375,354.6,834.0375" style="stroke: #B38D22; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="220.8" x="370.2" y="840.5402">Boolean isSvKvcAuthorized(byte kvc)</text><path d="M862.2,238.2 L862.2,298.2 L819.7788,303 L862.2,307.8 L862.2,367.9313 A0,0 0 0 0 862.2,367.9313 L1381.8,367.9313 A0,0 0 0 0 1381.8,367.9313 L1381.8,250.2 L1369.8,238.2 L862.2,238.2 A0,0 0 0 0 862.2,238.2 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.2;"/><path d="M1369.8,238.2 L1369.8,250.2 L1381.8,250.2 L1369.8,238.2 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="486" x="869.4" y="260.3941">Default values in PoTransaction if PoSecuritySetting doesn't specify it:</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="274.8" x="879" y="280.016">- session ModificationMode as ATOMIC</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="339.6" x="879" y="299.6379">- session RatificationMode as CLOSE_RATIFIED</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="432" x="879" y="319.2598">- PinTransmissionMode as ENCRYPTED if PoSecurity defined</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="252" x="879" y="338.8816">- any KIF/KVC values are authorized</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="484.8" x="879" y="358.5035">- no verification is done for: HCE token expiration, revoked PO or SAM</text><!--MD5=[e8e21ba3995782366e9aa9ad2c6b2d5f]
class PoResource--><rect fill="#FEFECE" height="90.8062" id="PoResource" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="229.2" x="75" y="666"/><ellipse cx="101.1" cy="685.2" fill="#ADD1B2" rx="13.2" ry="13.2" style="stroke: #ADD1B2; stroke-width: 1.2;"/><path d="M103.5,681 Q103.7437,680.4 104.025,680.1 Q104.3062,679.8 104.625,679.8 Q105.1875,679.8 105.5438,680.1375 Q105.9,680.475 105.9,681.2625 L105.9,683.1375 Q105.9,683.925 105.5625,684.2625 Q105.225,684.6 104.7,684.6 Q104.2313,684.6 103.9312,684.3938 Q103.6313,684.1875 103.5,683.6438 Q103.4438,683.2688 103.2375,683.0625 Q102.8625,682.6687 102.1875,682.4438 Q101.5125,682.2 100.8375,682.2 Q99.9937,682.2 99.2813,682.5375 Q98.5875,682.875 98.0438,683.625 Q97.5,684.375 97.5,685.4063 L97.5,686.5125 Q97.5,687.75 98.5125,688.575 Q99.525,689.4 101.325,689.4 Q102.3938,689.4 103.1438,689.1563 Q103.575,689.025 104.0625,688.5938 Q104.3813,688.35 104.55,688.275 Q104.7188,688.2 104.925,688.2 Q105.3188,688.2 105.6,688.5188 Q105.9,688.8188 105.9,689.25 Q105.9,689.6625 105.4875,690.15 Q104.8875,690.8625 103.9312,691.2563 Q102.675,691.8 101.1375,691.8 Q99.3375,691.8 97.8938,691.0875 Q96.7313,690.525 95.9063,689.3063 Q95.1,688.0875 95.1,686.6438 L95.1,685.3313 Q95.1,683.8313 95.8125,682.5188 Q96.5438,681.2063 97.8,680.5125 Q99.075,679.8 100.5,679.8 Q101.3625,679.8 102.1125,680.1 Q102.8625,680.4 103.5,681 Z "/><ellipse cx="125.7" cy="684.6" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="82.8" x="132.9" y="691.0922">SeResource</text><rect fill="#FFFFFF" height="20.5125" style="stroke: #000000; stroke-width: 1.2; stroke-dasharray: 2.0,2.0;" width="74.4" x="233.4" y="662.4"/><text fill="#000000" font-family="sans-serif" font-size="14.4" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="72" x="234.6" y="678.5484">CalypsoPo</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="76.2" x2="303" y1="704.4" y2="704.4"/><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="76.2" x2="303" y1="714" y2="714"/><ellipse cx="88.2" cy="727.2" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="76.8" x="99" y="732.5027">SeResource(</text><text fill="#FF0000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="117.6" x="175.8" y="732.5027">SeReader seReader</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="3.6" x="293.4" y="732.5027">,</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="87.6" x="99" y="749.1059">CalypsoPo po);</text><!--MD5=[8eb5cec01ad571a9feeff1db4f73a667]
class PoTransaction--><rect fill="#FEFECE" height="705.1219" id="PoTransaction" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="733.2" x="359.4" y="921.6"/><ellipse cx="666.3" cy="940.8" fill="#ADD1B2" rx="13.2" ry="13.2" style="stroke: #ADD1B2; stroke-width: 1.2;"/><path d="M668.7,936.6 Q668.9438,936 669.225,935.7 Q669.5063,935.4 669.825,935.4 Q670.3875,935.4 670.7438,935.7375 Q671.1,936.075 671.1,936.8625 L671.1,938.7375 Q671.1,939.525 670.7625,939.8625 Q670.425,940.2 669.9,940.2 Q669.4313,940.2 669.1313,939.9938 Q668.8313,939.7875 668.7,939.2438 Q668.6438,938.8688 668.4375,938.6625 Q668.0625,938.2688 667.3875,938.0437 Q666.7125,937.8 666.0375,937.8 Q665.1938,937.8 664.4812,938.1375 Q663.7875,938.475 663.2438,939.225 Q662.7,939.975 662.7,941.0062 L662.7,942.1125 Q662.7,943.35 663.7125,944.175 Q664.725,945 666.525,945 Q667.5938,945 668.3438,944.7562 Q668.775,944.625 669.2625,944.1937 Q669.5813,943.95 669.75,943.875 Q669.9187,943.8 670.125,943.8 Q670.5188,943.8 670.8,944.1188 Q671.1,944.4187 671.1,944.85 Q671.1,945.2625 670.6875,945.75 Q670.0875,946.4625 669.1313,946.8562 Q667.875,947.4 666.3375,947.4 Q664.5375,947.4 663.0938,946.6875 Q661.9313,946.125 661.1062,944.9063 Q660.3,943.6875 660.3,942.2438 L660.3,940.9313 Q660.3,939.4313 661.0125,938.1188 Q661.7438,936.8063 663,936.1125 Q664.275,935.4 665.7,935.4 Q666.5625,935.4 667.3125,935.7 Q668.0625,936 668.7,936.6 Z "/><ellipse cx="696.9" cy="940.2" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="96" x="704.1" y="946.6922">PoTransaction</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="360.6" x2="1091.4" y1="960" y2="960"/><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="360.6" x2="1091.4" y1="969.6" y2="969.6"/><ellipse cx="372.6" cy="982.8" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="465.6" x="383.4" y="988.1027">PoTransaction(PoResource poResource, PoSecuritySetting[0..1] securitySetting)</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="0" x="387" y="1004.7059"/><ellipse cx="372.6" cy="1016.0062" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1021.309">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="272.4" x="414.6" y="1021.309">processPoCommands(ChannelControl channel)</text><ellipse cx="372.6" cy="1032.6094" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1037.9121">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="212.4" x="414.6" y="1037.9121">processOpening(AccessLevel level)</text><ellipse cx="372.6" cy="1049.2125" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1054.5152">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="192" x="414.6" y="1054.5152">processPoCommandsInSession()</text><ellipse cx="372.6" cy="1065.8156" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1071.1184">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="236.4" x="414.6" y="1071.1184">processClosing(ChannelControl channel)</text><ellipse cx="372.6" cy="1082.4188" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1087.7215">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="234" x="414.6" y="1087.7215">processCancel(ChannelControl channel)</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="0" x="387" y="1104.3246"/><ellipse cx="372.6" cy="1115.625" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1120.9277">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="145.2" x="414.6" y="1120.9277">prepareCheckPinStatus()</text><ellipse cx="372.6" cy="1132.2281" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1137.5309">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="164.4" x="414.6" y="1137.5309">processVerifyPin(String pin)</text><ellipse cx="372.6" cy="1148.8313" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1154.134">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="163.2" x="414.6" y="1154.134">processVerifyPin(byte[] pin)</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="0" x="387" y="1170.7371"/><ellipse cx="372.6" cy="1182.0375" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1187.3402">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="405.6" x="414.6" y="1187.3402">prepareSvGet(SvSetting.Operation operation, SvSetting.Action action)</text><ellipse cx="372.6" cy="1198.6406" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1203.9434">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="333.6" x="414.6" y="1203.9434">prepareSvReload(int amount, int date, int time, String free)</text><ellipse cx="372.6" cy="1215.2437" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1220.5465">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="370.8" x="414.6" y="1220.5465">prepareSvReload(int amount, byte[] date, byte[] time, byte[] free)</text><ellipse cx="372.6" cy="1231.8469" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1237.1496">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="169.2" x="414.6" y="1237.1496">prepareSvReload(int amount)</text><ellipse cx="372.6" cy="1248.45" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1253.7527">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="254.4" x="414.6" y="1253.7527">prepareSvDebit(int amount, int date, int time)</text><ellipse cx="372.6" cy="1265.0531" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1270.3559">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="292.8" x="414.6" y="1270.3559">prepareSvDebit(int amount, byte[] date, byte[] time)</text><ellipse cx="372.6" cy="1281.6563" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1286.959">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="158.4" x="414.6" y="1286.959">prepareSvDebit(int amount)</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="0" x="387" y="1303.5621"/><ellipse cx="372.6" cy="1314.8625" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1320.1652">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="156" x="414.6" y="1320.1652">prepareSelectFile(short lid)</text><ellipse cx="372.6" cy="1331.4656" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1336.7684">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="158.4" x="414.6" y="1336.7684">prepareSelectFile(byte[] lid)</text><ellipse cx="372.6" cy="1348.0688" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1353.3715">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="249.6" x="414.6" y="1353.3715">prepareSelectFile(SelectFileControl control)</text><ellipse cx="372.6" cy="1364.6719" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1369.9746">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="296.4" x="414.6" y="1369.9746">prepareReadRecordFile(byte sfi, int recordNumber)</text><ellipse cx="372.6" cy="1381.275" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1386.5777">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="546" x="414.6" y="1386.5777">prepareReadRecordFile(byte sfi, int firstRecordNumber, int numberOfRecords, int recordSize))</text><ellipse cx="372.6" cy="1397.8781" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1403.1809">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="670.8" x="414.6" y="1403.1809">prepareReadSubRecordFile(byte sfi, int firstRecordNumber, int numberOfRecord, int recordOffset, int recordLength)</text><ellipse cx="372.6" cy="1414.4813" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1419.784">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="388.8" x="414.6" y="1419.784">prepareReadBinaryFile(byte sfi, int dataLength, int[0..1] dataOffset)</text><ellipse cx="372.6" cy="1431.0844" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1436.3871">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="313.2" x="414.6" y="1436.3871">prepareReadCounterFile(byte sfi, int countersNumber)</text><ellipse cx="372.6" cy="1447.6875" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1452.9902">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="294" x="414.6" y="1452.9902">prepareAppendRecord(byte sfi, byte[] recordData)</text><ellipse cx="372.6" cy="1464.2906" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1469.5934">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="396" x="414.6" y="1469.5934">prepareUpdateRecord(byte sfi, int recordNumber, byte[] recordData)</text><ellipse cx="372.6" cy="1480.8938" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1486.1965">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="385.2" x="414.6" y="1486.1965">prepareWriteRecord(byte sfi, int recordNumber, byte[] recordData)</text><ellipse cx="372.6" cy="1497.4969" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1502.7996">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="397.2" x="414.6" y="1502.7996">prepareUpdateBinaryFile(byte sfi, byte[] fileData, int[0..1] dataOffset)</text><ellipse cx="372.6" cy="1514.1" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1519.4027">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="386.4" x="414.6" y="1519.4027">prepareWriteBinaryFile(byte sfi, byte[] fileData, int[0..1] dataOffset)</text><ellipse cx="372.6" cy="1530.7031" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1536.0059">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="381.6" x="414.6" y="1536.0059">prepareIncreaseCounter(byte sfi, int counterNumber, int incValue)</text><ellipse cx="372.6" cy="1547.3062" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1552.609">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="392.4" x="414.6" y="1552.609">prepareDecreaseCounter(byte sfi, int counterNumber, int decValue)</text><ellipse cx="372.6" cy="1563.9094" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1569.2121">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="360" x="414.6" y="1569.2121">prepareSetCounter(byte sfi, int counterNumber, int newValue)</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="0" x="387" y="1585.8152"/><ellipse cx="372.6" cy="1597.1156" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1602.4184">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="109.2" x="414.6" y="1602.4184">prepareInvalidate()</text><ellipse cx="372.6" cy="1613.7188" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="383.4" y="1619.0215">final</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="121.2" x="414.6" y="1619.0215">prepareRehabilitate()</text><!--MD5=[2242c43c330acc437358859ea7f59776]
class SessionState--><rect fill="#FEFECE" height="107.4094" id="SessionState" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="150" x="551.4" y="1700.4"/><ellipse cx="573.72" cy="1719.6" fill="#EB937F" rx="13.2" ry="13.2" style="stroke: #EB93DF; stroke-width: 1.2;"/><path d="M571.92,1720.8 L571.92,1723.2 L576.72,1723.2 L576.72,1722 L576.72,1721.4188 L577.47,1720.8 L577.92,1720.8 L578.37,1720.8 L579.12,1721.4188 L579.12,1722 L579.12,1725.6 L569.52,1725.6 L568.9388,1725.6 L568.32,1724.85 L568.32,1724.4 L568.32,1723.95 L568.9388,1723.2 L569.52,1723.2 L569.52,1723.2 L569.52,1716 L569.52,1716 L568.9388,1716 L568.32,1715.25 L568.32,1714.8 L568.32,1714.35 L568.9388,1713.6 L569.52,1713.6 L579.12,1713.6 L579.12,1717.2 L579.12,1717.7813 L578.37,1718.4 L577.92,1718.4 L577.47,1718.4 L576.72,1717.7813 L576.72,1717.2 L576.72,1716 L571.92,1716 L571.92,1718.4 L573.12,1718.4 L573.12,1717.8188 L573.12,1717.8188 L573.87,1717.2 L574.32,1717.2 L574.77,1717.2 L575.52,1717.8188 L575.52,1718.4 L575.52,1720.8 L575.52,1721.3813 L574.77,1722 L574.77,1722 L574.32,1722 L573.87,1722 L573.12,1721.3813 L573.12,1721.3813 L573.12,1720.8 L571.92,1720.8 Z "/><rect fill="#F24D5C" height="7.2" style="stroke: #C82930; stroke-width: 1.2;" width="7.2" x="593.88" y="1715.4"/><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="88.8" x="604.68" y="1725.4922">SessionState</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="552.6" x2="700.2" y1="1738.8" y2="1738.8"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="135.6" x="558.6" y="1757.3027">SESSION_UNITIALIZED,</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="96" x="558.6" y="1773.9059">SESSION_OPEN,</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="109.2" x="558.6" y="1790.509">SESSION_CLOSED</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="552.6" x2="700.2" y1="1798.2094" y2="1798.2094"/><!--MD5=[bf7a0c1c8b34ad25b46528e084cfcf9f]
class SessionSetting--><rect fill="#FEFECE" height="57.6" id="SessionSetting" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="184.8" x="744" y="1725.6"/><ellipse cx="762" cy="1744.8" fill="#ADD1B2" rx="13.2" ry="13.2" style="stroke: #ADD1B2; stroke-width: 1.2;"/><path d="M764.4,1740.6 Q764.6438,1740 764.925,1739.7 Q765.2063,1739.4 765.525,1739.4 Q766.0875,1739.4 766.4438,1739.7375 Q766.8,1740.075 766.8,1740.8625 L766.8,1742.7375 Q766.8,1743.525 766.4625,1743.8625 Q766.125,1744.2 765.6,1744.2 Q765.1313,1744.2 764.8313,1743.9937 Q764.5313,1743.7875 764.4,1743.2437 Q764.3438,1742.8687 764.1375,1742.6625 Q763.7625,1742.2688 763.0875,1742.0438 Q762.4125,1741.8 761.7375,1741.8 Q760.8938,1741.8 760.1813,1742.1375 Q759.4875,1742.475 758.9438,1743.225 Q758.4,1743.975 758.4,1745.0063 L758.4,1746.1125 Q758.4,1747.35 759.4125,1748.175 Q760.425,1749 762.225,1749 Q763.2937,1749 764.0437,1748.7563 Q764.475,1748.625 764.9625,1748.1938 Q765.2813,1747.95 765.45,1747.875 Q765.6188,1747.8 765.825,1747.8 Q766.2188,1747.8 766.5,1748.1187 Q766.8,1748.4188 766.8,1748.85 Q766.8,1749.2625 766.3875,1749.75 Q765.7875,1750.4625 764.8313,1750.8563 Q763.575,1751.4 762.0375,1751.4 Q760.2375,1751.4 758.7937,1750.6875 Q757.6313,1750.125 756.8063,1748.9063 Q756,1747.6875 756,1746.2437 L756,1744.9312 Q756,1743.4312 756.7125,1742.1187 Q757.4438,1740.8062 758.7,1740.1125 Q759.975,1739.4 761.4,1739.4 Q762.2625,1739.4 763.0125,1739.7 Q763.7625,1740 764.4,1740.6 Z "/><ellipse cx="784.8" cy="1744.2" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="14.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28.8" x="792" y="1750.6922">final</text><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="100.8" x="824.4" y="1750.6922">SessionSetting</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="745.2" x2="927.6" y1="1764" y2="1764"/><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="745.2" x2="927.6" y1="1773.6" y2="1773.6"/><!--MD5=[45c40070d26b32101cf9b7ab72916b9e]
class AccessLevel--><rect fill="#FEFECE" height="107.4094" id="AccessLevel" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="267.6" x="940.2" y="2048.4"/><ellipse cx="1020.9" cy="2067.6" fill="#EB937F" rx="13.2" ry="13.2" style="stroke: #EB93DF; stroke-width: 1.2;"/><path d="M1019.1,2068.8 L1019.1,2071.2 L1023.9,2071.2 L1023.9,2070 L1023.9,2069.4188 L1024.65,2068.8 L1025.1,2068.8 L1025.55,2068.8 L1026.3,2069.4188 L1026.3,2070 L1026.3,2073.6 L1016.7,2073.6 L1016.1188,2073.6 L1015.5,2072.85 L1015.5,2072.4 L1015.5,2071.95 L1016.1188,2071.2 L1016.7,2071.2 L1016.7,2071.2 L1016.7,2064 L1016.7,2064 L1016.1188,2064 L1015.5,2063.25 L1015.5,2062.8 L1015.5,2062.35 L1016.1188,2061.6 L1016.7,2061.6 L1026.3,2061.6 L1026.3,2065.2 L1026.3,2065.7813 L1025.55,2066.4 L1025.1,2066.4 L1024.65,2066.4 L1023.9,2065.7813 L1023.9,2065.2 L1023.9,2064 L1019.1,2064 L1019.1,2066.4 L1020.3,2066.4 L1020.3,2065.8188 L1020.3,2065.8188 L1021.05,2065.2 L1021.5,2065.2 L1021.95,2065.2 L1022.7,2065.8188 L1022.7,2066.4 L1022.7,2068.8 L1022.7,2069.3813 L1021.95,2070 L1021.95,2070 L1021.5,2070 L1021.05,2070 L1020.3,2069.3813 L1020.3,2069.3813 L1020.3,2068.8 L1019.1,2068.8 Z "/><ellipse cx="1051.5" cy="2067" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="82.8" x="1058.7" y="2073.4922">AccessLevel</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="941.4" x2="1206.6" y1="2086.8" y2="2086.8"/><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="941.4" x2="1206.6" y1="2096.4" y2="2096.4"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="253.2" x="947.4" y="2114.9027">SESSION_LVL_PERSO("perso", byte 0x01),</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="237.6" x="947.4" y="2131.5059">SESSION_LVL_LOAD("load", byte 0x02),</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="236.4" x="947.4" y="2148.109">SESSION_LVL_DEBIT("debit", byte 0x03)</text><!--MD5=[e19a48d2c11a8f9a6a11f4ef9a7d8d18]
class ModificationMode--><rect fill="#FEFECE" height="90.8062" id="ModificationMode" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="165.6" x="798" y="1881.6"/><ellipse cx="816" cy="1900.8" fill="#EB937F" rx="13.2" ry="13.2" style="stroke: #EB93DF; stroke-width: 1.2;"/><path d="M814.2,1902 L814.2,1904.4 L819,1904.4 L819,1903.2 L819,1902.6187 L819.75,1902 L820.2,1902 L820.65,1902 L821.4,1902.6187 L821.4,1903.2 L821.4,1906.8 L811.8,1906.8 L811.2188,1906.8 L810.6,1906.05 L810.6,1905.6 L810.6,1905.15 L811.2188,1904.4 L811.8,1904.4 L811.8,1904.4 L811.8,1897.2 L811.8,1897.2 L811.2188,1897.2 L810.6,1896.45 L810.6,1896 L810.6,1895.55 L811.2188,1894.8 L811.8,1894.8 L821.4,1894.8 L821.4,1898.4 L821.4,1898.9812 L820.65,1899.6 L820.2,1899.6 L819.75,1899.6 L819,1898.9812 L819,1898.4 L819,1897.2 L814.2,1897.2 L814.2,1899.6 L815.4,1899.6 L815.4,1899.0188 L815.4,1899.0188 L816.15,1898.4 L816.6,1898.4 L817.05,1898.4 L817.8,1899.0188 L817.8,1899.6 L817.8,1902 L817.8,1902.5813 L817.05,1903.2 L817.05,1903.2 L816.6,1903.2 L816.15,1903.2 L815.4,1902.5813 L815.4,1902.5813 L815.4,1902 L814.2,1902 Z "/><ellipse cx="838.8" cy="1900.2" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="114" x="846" y="1906.6922">ModificationMode</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="799.2" x2="962.4" y1="1920" y2="1920"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="50.4" x="805.2" y="1938.5027">ATOMIC,</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="56.4" x="805.2" y="1955.1059">MULTIPLE</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="799.2" x2="962.4" y1="1962.8062" y2="1962.8062"/><!--MD5=[139c679d0f2db6318e7e57d2f6dd7d7b]
class RatificationMode--><rect fill="#FEFECE" height="90.8062" id="RatificationMode" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="160.8" x="595.2" y="1881.6"/><ellipse cx="613.2" cy="1900.8" fill="#EB937F" rx="13.2" ry="13.2" style="stroke: #EB93DF; stroke-width: 1.2;"/><path d="M611.4,1902 L611.4,1904.4 L616.2,1904.4 L616.2,1903.2 L616.2,1902.6187 L616.95,1902 L617.4,1902 L617.85,1902 L618.6,1902.6187 L618.6,1903.2 L618.6,1906.8 L609,1906.8 L608.4187,1906.8 L607.8,1906.05 L607.8,1905.6 L607.8,1905.15 L608.4187,1904.4 L609,1904.4 L609,1904.4 L609,1897.2 L609,1897.2 L608.4187,1897.2 L607.8,1896.45 L607.8,1896 L607.8,1895.55 L608.4187,1894.8 L609,1894.8 L618.6,1894.8 L618.6,1898.4 L618.6,1898.9812 L617.85,1899.6 L617.4,1899.6 L616.95,1899.6 L616.2,1898.9812 L616.2,1898.4 L616.2,1897.2 L611.4,1897.2 L611.4,1899.6 L612.6,1899.6 L612.6,1899.0188 L612.6,1899.0188 L613.35,1898.4 L613.8,1898.4 L614.25,1898.4 L615,1899.0188 L615,1899.6 L615,1902 L615,1902.5813 L614.25,1903.2 L614.25,1903.2 L613.8,1903.2 L613.35,1903.2 L612.6,1902.5813 L612.6,1902.5813 L612.6,1902 L611.4,1902 Z "/><ellipse cx="636" cy="1900.2" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="109.2" x="643.2" y="1906.6922">RatificationMode</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="596.4" x2="754.8" y1="1920" y2="1920"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="104.4" x="602.4" y="1938.5027">CLOSE_RATIFIED,</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="133.2" x="602.4" y="1955.1059">CLOSE_NOT_RATIFIED</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="596.4" x2="754.8" y1="1962.8062" y2="1962.8062"/><!--MD5=[ce8182edd4590e04a2102797ac389b3e]
class EncryptionMode--><rect fill="#FEFECE" height="90.8062" id="EncryptionMode" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="156" x="1005.6" y="1881.6"/><ellipse cx="1023.6" cy="1900.8" fill="#EB937F" rx="13.2" ry="13.2" style="stroke: #EB93DF; stroke-width: 1.2;"/><path d="M1021.8,1902 L1021.8,1904.4 L1026.6,1904.4 L1026.6,1903.2 L1026.6,1902.6187 L1027.35,1902 L1027.8,1902 L1028.25,1902 L1029,1902.6187 L1029,1903.2 L1029,1906.8 L1019.4,1906.8 L1018.8187,1906.8 L1018.2,1906.05 L1018.2,1905.6 L1018.2,1905.15 L1018.8187,1904.4 L1019.4,1904.4 L1019.4,1904.4 L1019.4,1897.2 L1019.4,1897.2 L1018.8187,1897.2 L1018.2,1896.45 L1018.2,1896 L1018.2,1895.55 L1018.8187,1894.8 L1019.4,1894.8 L1029,1894.8 L1029,1898.4 L1029,1898.9812 L1028.25,1899.6 L1027.8,1899.6 L1027.35,1899.6 L1026.6,1898.9812 L1026.6,1898.4 L1026.6,1897.2 L1021.8,1897.2 L1021.8,1899.6 L1023,1899.6 L1023,1899.0188 L1023,1899.0188 L1023.75,1898.4 L1024.2,1898.4 L1024.65,1898.4 L1025.4,1899.0188 L1025.4,1899.6 L1025.4,1902 L1025.4,1902.5813 L1024.65,1903.2 L1024.65,1903.2 L1024.2,1903.2 L1023.75,1903.2 L1023,1902.5813 L1023,1902.5813 L1023,1902 L1021.8,1902 Z "/><ellipse cx="1046.4" cy="1900.2" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="104.4" x="1053.6" y="1906.6922">EncryptionMode</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="1006.8" x2="1160.4" y1="1920" y2="1920"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="1012.8" y="1938.5027">ACTIVATE,</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="76.8" x="1012.8" y="1955.1059">DEACTIVATE</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="1006.8" x2="1160.4" y1="1962.8062" y2="1962.8062"/><!--MD5=[587c29523c7e651cb28d7191d1daa746]
class AuthenticationMode--><rect fill="#FEFECE" height="90.8062" id="AuthenticationMode" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="180" x="717.6" y="2056.8"/><ellipse cx="735.6" cy="2076" fill="#EB937F" rx="13.2" ry="13.2" style="stroke: #EB93DF; stroke-width: 1.2;"/><path d="M733.8,2077.2 L733.8,2079.6 L738.6,2079.6 L738.6,2078.4 L738.6,2077.8188 L739.35,2077.2 L739.8,2077.2 L740.25,2077.2 L741,2077.8188 L741,2078.4 L741,2082 L731.4,2082 L730.8188,2082 L730.2,2081.25 L730.2,2080.8 L730.2,2080.35 L730.8188,2079.6 L731.4,2079.6 L731.4,2079.6 L731.4,2072.4 L731.4,2072.4 L730.8188,2072.4 L730.2,2071.65 L730.2,2071.2 L730.2,2070.75 L730.8188,2070 L731.4,2070 L741,2070 L741,2073.6 L741,2074.1813 L740.25,2074.8 L739.8,2074.8 L739.35,2074.8 L738.6,2074.1813 L738.6,2073.6 L738.6,2072.4 L733.8,2072.4 L733.8,2074.8 L735,2074.8 L735,2074.2188 L735,2074.2188 L735.75,2073.6 L736.2,2073.6 L736.65,2073.6 L737.4,2074.2188 L737.4,2074.8 L737.4,2077.2 L737.4,2077.7813 L736.65,2078.4 L736.65,2078.4 L736.2,2078.4 L735.75,2078.4 L735,2077.7813 L735,2077.7813 L735,2077.2 L733.8,2077.2 Z "/><ellipse cx="758.4" cy="2075.4" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="128.4" x="765.6" y="2081.8922">AuthenticationMode</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="718.8" x2="896.4" y1="2095.2" y2="2095.2"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="75.6" x="724.8" y="2113.7027">REQUESTED,</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="104.4" x="724.8" y="2130.3059">NOT_REQUESTED</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="718.8" x2="896.4" y1="2138.0063" y2="2138.0063"/><!--MD5=[69e7de8796175c80a787a8fe6d04a077]
class PinTransmissionMode--><rect fill="#FEFECE" height="90.8062" id="PinTransmissionMode" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="201.6" x="970.8" y="1708.8"/><ellipse cx="988.8" cy="1728" fill="#EB937F" rx="13.2" ry="13.2" style="stroke: #EB93DF; stroke-width: 1.2;"/><path d="M987,1729.2 L987,1731.6 L991.8,1731.6 L991.8,1730.4 L991.8,1729.8188 L992.55,1729.2 L993,1729.2 L993.45,1729.2 L994.2,1729.8188 L994.2,1730.4 L994.2,1734 L984.6,1734 L984.0188,1734 L983.4,1733.25 L983.4,1732.8 L983.4,1732.35 L984.0188,1731.6 L984.6,1731.6 L984.6,1731.6 L984.6,1724.4 L984.6,1724.4 L984.0188,1724.4 L983.4,1723.65 L983.4,1723.2 L983.4,1722.75 L984.0188,1722 L984.6,1722 L994.2,1722 L994.2,1725.6 L994.2,1726.1812 L993.45,1726.8 L993,1726.8 L992.55,1726.8 L991.8,1726.1812 L991.8,1725.6 L991.8,1724.4 L987,1724.4 L987,1726.8 L988.2,1726.8 L988.2,1726.2188 L988.2,1726.2188 L988.95,1725.6 L989.4,1725.6 L989.85,1725.6 L990.6,1726.2188 L990.6,1726.8 L990.6,1729.2 L990.6,1729.7813 L989.85,1730.4 L989.85,1730.4 L989.4,1730.4 L988.95,1730.4 L988.2,1729.7813 L988.2,1729.7813 L988.2,1729.2 L987,1729.2 Z "/><ellipse cx="1011.6" cy="1727.4" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="150" x="1018.8" y="1733.8922">PinTransmissionMode</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="972" x2="1171.2" y1="1747.2" y2="1747.2"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="38.4" x="978" y="1765.7027">PLAIN,</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="72" x="978" y="1782.3059">ENCRYPTED</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="972" x2="1171.2" y1="1790.0063" y2="1790.0063"/><!--MD5=[43918d86839edc1befb88ea50efcfbfb]
class SamResource--><rect fill="#FEFECE" height="90.8062" id="SamResource" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="229.2" x="780.6" y="666"/><ellipse cx="800.76" cy="685.2" fill="#ADD1B2" rx="13.2" ry="13.2" style="stroke: #ADD1B2; stroke-width: 1.2;"/><path d="M803.16,681 Q803.4038,680.4 803.685,680.1 Q803.9663,679.8 804.285,679.8 Q804.8475,679.8 805.2037,680.1375 Q805.56,680.475 805.56,681.2625 L805.56,683.1375 Q805.56,683.925 805.2225,684.2625 Q804.885,684.6 804.36,684.6 Q803.8912,684.6 803.5913,684.3938 Q803.2912,684.1875 803.16,683.6438 Q803.1037,683.2688 802.8975,683.0625 Q802.5225,682.6687 801.8475,682.4438 Q801.1725,682.2 800.4975,682.2 Q799.6538,682.2 798.9413,682.5375 Q798.2475,682.875 797.7037,683.625 Q797.16,684.375 797.16,685.4063 L797.16,686.5125 Q797.16,687.75 798.1725,688.575 Q799.185,689.4 800.985,689.4 Q802.0537,689.4 802.8037,689.1563 Q803.235,689.025 803.7225,688.5938 Q804.0412,688.35 804.21,688.275 Q804.3788,688.2 804.585,688.2 Q804.9787,688.2 805.26,688.5188 Q805.56,688.8188 805.56,689.25 Q805.56,689.6625 805.1475,690.15 Q804.5475,690.8625 803.5913,691.2563 Q802.335,691.8 800.7975,691.8 Q798.9975,691.8 797.5537,691.0875 Q796.3912,690.525 795.5663,689.3063 Q794.76,688.0875 794.76,686.6438 L794.76,685.3313 Q794.76,683.8313 795.4725,682.5188 Q796.2037,681.2063 797.46,680.5125 Q798.735,679.8 800.16,679.8 Q801.0225,679.8 801.7725,680.1 Q802.5225,680.4 803.16,681 Z "/><ellipse cx="824.04" cy="684.6" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="82.8" x="831.24" y="691.0922">SeResource</text><rect fill="#FFFFFF" height="20.5125" style="stroke: #000000; stroke-width: 1.2; stroke-dasharray: 2.0,2.0;" width="87.6" x="925.8" y="662.4"/><text fill="#000000" font-family="sans-serif" font-size="14.4" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="85.2" x="927" y="678.5484">CalypsoSam</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="781.8" x2="1008.6" y1="704.4" y2="704.4"/><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="781.8" x2="1008.6" y1="714" y2="714"/><ellipse cx="793.8" cy="727.2" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="76.8" x="804.6" y="732.5027">SeResource(</text><text fill="#FF0000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="117.6" x="881.4" y="732.5027">SeReader seReader</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="3.6" x="999" y="732.5027">,</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="108" x="804.6" y="749.1059">CalypsoSam sam);</text><!--MD5=[f25ff1fa8fa59bbc0543eaadeb7d653a]
class CalypsoSam--><rect fill="#FEFECE" height="190.425" id="CalypsoSam" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="301.2" x="1051.8" y="616.2"/><ellipse cx="1131.9" cy="635.4" fill="#ADD1B2" rx="13.2" ry="13.2" style="stroke: #ADD1B2; stroke-width: 1.2;"/><path d="M1134.3,631.2 Q1134.5438,630.6 1134.825,630.3 Q1135.1063,630 1135.425,630 Q1135.9875,630 1136.3438,630.3375 Q1136.7,630.675 1136.7,631.4625 L1136.7,633.3375 Q1136.7,634.125 1136.3625,634.4625 Q1136.025,634.8 1135.5,634.8 Q1135.0313,634.8 1134.7313,634.5938 Q1134.4312,634.3875 1134.3,633.8438 Q1134.2437,633.4688 1134.0375,633.2625 Q1133.6625,632.8688 1132.9875,632.6438 Q1132.3125,632.4 1131.6375,632.4 Q1130.7938,632.4 1130.0813,632.7375 Q1129.3875,633.075 1128.8438,633.825 Q1128.3,634.575 1128.3,635.6062 L1128.3,636.7125 Q1128.3,637.95 1129.3125,638.775 Q1130.325,639.6 1132.125,639.6 Q1133.1938,639.6 1133.9438,639.3562 Q1134.375,639.225 1134.8625,638.7937 Q1135.1812,638.55 1135.35,638.475 Q1135.5188,638.4 1135.725,638.4 Q1136.1187,638.4 1136.4,638.7188 Q1136.7,639.0188 1136.7,639.45 Q1136.7,639.8625 1136.2875,640.35 Q1135.6875,641.0625 1134.7313,641.4563 Q1133.475,642 1131.9375,642 Q1130.1375,642 1128.6938,641.2875 Q1127.5313,640.725 1126.7063,639.5063 Q1125.9,638.2875 1125.9,636.8438 L1125.9,635.5313 Q1125.9,634.0313 1126.6125,632.7188 Q1127.3438,631.4063 1128.6,630.7125 Q1129.875,630 1131.3,630 Q1132.1625,630 1132.9125,630.3 Q1133.6625,630.6 1134.3,631.2 Z "/><ellipse cx="1162.5" cy="634.8" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="14.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28.8" x="1169.7" y="641.2922">final</text><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="85.2" x="1202.1" y="641.2922">CalypsoSam</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="1053" x2="1351.8" y1="654.6" y2="654.6"/><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="1053" x2="1351.8" y1="664.2" y2="664.2"/><polygon fill="#4177AF" points="1065,672.6,1060.2,679.8,1069.8,679.8" style="stroke: #1963A0; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="76.8" x="1075.8" y="682.7027">CalypsoSam(</text><text fill="#FF0000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="188.4" x="1152.6" y="682.7027">SeResponse selectionResponse</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="4.8" x="1341" y="682.7027">)</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="0" x="1079.4" y="699.3059"/><ellipse cx="1065" cy="710.6062" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="180" x="1075.8" y="715.909">SamRevision getSamRevision()</text><ellipse cx="1065" cy="727.2094" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="140.4" x="1075.8" y="732.5121">byte[] getSerialNumber()</text><ellipse cx="1065" cy="743.8125" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="103.2" x="1075.8" y="749.1152">byte getPlatform()</text><ellipse cx="1065" cy="760.4156" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="148.8" x="1075.8" y="765.7184">byte getApplicationType()</text><ellipse cx="1065" cy="777.0188" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="171.6" x="1075.8" y="782.3215">byte getApplicationSubType()</text><ellipse cx="1065" cy="793.6219" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="147.6" x="1075.8" y="798.9246">byte getSoftwareIssuer()</text><!--MD5=[7d16591ce1ac0fb103d5c2b0f24533d6]
class SvSetting--><rect fill="#FEFECE" height="57.6" id="SvSetting" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="145.2" x="157.8" y="1725.6"/><ellipse cx="175.8" cy="1744.8" fill="#ADD1B2" rx="13.2" ry="13.2" style="stroke: #ADD1B2; stroke-width: 1.2;"/><path d="M178.2,1740.6 Q178.4438,1740 178.725,1739.7 Q179.0063,1739.4 179.325,1739.4 Q179.8875,1739.4 180.2438,1739.7375 Q180.6,1740.075 180.6,1740.8625 L180.6,1742.7375 Q180.6,1743.525 180.2625,1743.8625 Q179.925,1744.2 179.4,1744.2 Q178.9313,1744.2 178.6313,1743.9937 Q178.3312,1743.7875 178.2,1743.2437 Q178.1437,1742.8687 177.9375,1742.6625 Q177.5625,1742.2688 176.8875,1742.0438 Q176.2125,1741.8 175.5375,1741.8 Q174.6938,1741.8 173.9813,1742.1375 Q173.2875,1742.475 172.7438,1743.225 Q172.2,1743.975 172.2,1745.0063 L172.2,1746.1125 Q172.2,1747.35 173.2125,1748.175 Q174.225,1749 176.025,1749 Q177.0938,1749 177.8438,1748.7563 Q178.275,1748.625 178.7625,1748.1938 Q179.0812,1747.95 179.25,1747.875 Q179.4188,1747.8 179.625,1747.8 Q180.0187,1747.8 180.3,1748.1187 Q180.6,1748.4188 180.6,1748.85 Q180.6,1749.2625 180.1875,1749.75 Q179.5875,1750.4625 178.6313,1750.8563 Q177.375,1751.4 175.8375,1751.4 Q174.0375,1751.4 172.5938,1750.6875 Q171.4313,1750.125 170.6063,1748.9063 Q169.8,1747.6875 169.8,1746.2437 L169.8,1744.9312 Q169.8,1743.4312 170.5125,1742.1187 Q171.2438,1740.8062 172.5,1740.1125 Q173.775,1739.4 175.2,1739.4 Q176.0625,1739.4 176.8125,1739.7 Q177.5625,1740 178.2,1740.6 Z "/><ellipse cx="198.6" cy="1744.2" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="14.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28.8" x="205.8" y="1750.6922">final</text><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="61.2" x="238.2" y="1750.6922">SvSetting</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="159" x2="301.8" y1="1764" y2="1764"/><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="159" x2="301.8" y1="1773.6" y2="1773.6"/><!--MD5=[cca5d97aaf46870920fae66c9bd85cdd]
class Operation--><rect fill="#FEFECE" height="90.8062" id="Operation" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="116.4" x="103.8" y="1881.6"/><ellipse cx="121.8" cy="1900.8" fill="#EB937F" rx="13.2" ry="13.2" style="stroke: #EB93DF; stroke-width: 1.2;"/><path d="M120,1902 L120,1904.4 L124.8,1904.4 L124.8,1903.2 L124.8,1902.6187 L125.55,1902 L126,1902 L126.45,1902 L127.2,1902.6187 L127.2,1903.2 L127.2,1906.8 L117.6,1906.8 L117.0188,1906.8 L116.4,1906.05 L116.4,1905.6 L116.4,1905.15 L117.0188,1904.4 L117.6,1904.4 L117.6,1904.4 L117.6,1897.2 L117.6,1897.2 L117.0188,1897.2 L116.4,1896.45 L116.4,1896 L116.4,1895.55 L117.0188,1894.8 L117.6,1894.8 L127.2,1894.8 L127.2,1898.4 L127.2,1898.9812 L126.45,1899.6 L126,1899.6 L125.55,1899.6 L124.8,1898.9812 L124.8,1898.4 L124.8,1897.2 L120,1897.2 L120,1899.6 L121.2,1899.6 L121.2,1899.0188 L121.2,1899.0188 L121.95,1898.4 L122.4,1898.4 L122.85,1898.4 L123.6,1899.0188 L123.6,1899.6 L123.6,1902 L123.6,1902.5813 L122.85,1903.2 L122.85,1903.2 L122.4,1903.2 L121.95,1903.2 L121.2,1902.5813 L121.2,1902.5813 L121.2,1902 L120,1902 Z "/><ellipse cx="144.6" cy="1900.2" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="151.8" y="1906.6922">Operation</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="105" x2="219" y1="1920" y2="1920"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="54" x="111" y="1938.5027">RELOAD,</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="33.6" x="111" y="1955.1059">DEBIT</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="105" x2="219" y1="1962.8062" y2="1962.8062"/><!--MD5=[f8e7078f77c005d15b486c0c98deb1e6]
class Action--><rect fill="#FEFECE" height="90.8062" id="Action" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="91.2" x="262.8" y="1881.6"/><ellipse cx="280.8" cy="1900.8" fill="#EB937F" rx="13.2" ry="13.2" style="stroke: #EB93DF; stroke-width: 1.2;"/><path d="M279,1902 L279,1904.4 L283.8,1904.4 L283.8,1903.2 L283.8,1902.6187 L284.55,1902 L285,1902 L285.45,1902 L286.2,1902.6187 L286.2,1903.2 L286.2,1906.8 L276.6,1906.8 L276.0188,1906.8 L275.4,1906.05 L275.4,1905.6 L275.4,1905.15 L276.0188,1904.4 L276.6,1904.4 L276.6,1904.4 L276.6,1897.2 L276.6,1897.2 L276.0188,1897.2 L275.4,1896.45 L275.4,1896 L275.4,1895.55 L276.0188,1894.8 L276.6,1894.8 L286.2,1894.8 L286.2,1898.4 L286.2,1898.9812 L285.45,1899.6 L285,1899.6 L284.55,1899.6 L283.8,1898.9812 L283.8,1898.4 L283.8,1897.2 L279,1897.2 L279,1899.6 L280.2,1899.6 L280.2,1899.0188 L280.2,1899.0188 L280.95,1898.4 L281.4,1898.4 L281.85,1898.4 L282.6,1899.0188 L282.6,1899.6 L282.6,1902 L282.6,1902.5813 L281.85,1903.2 L281.85,1903.2 L281.4,1903.2 L280.95,1903.2 L280.2,1902.5813 L280.2,1902.5813 L280.2,1902 L279,1902 Z "/><ellipse cx="303.6" cy="1900.2" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="39.6" x="310.8" y="1906.6922">Action</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="264" x2="352.8" y1="1920" y2="1920"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="21.6" x="270" y="1938.5027">DO,</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="34.8" x="270" y="1955.1059">UNDO</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="264" x2="352.8" y1="1962.8062" y2="1962.8062"/><!--MD5=[67d91b3e56e3fb89140abbb352fa8438]
class LogRead--><rect fill="#FEFECE" height="90.8062" id="LogRead" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="112.8" x="396" y="1881.6"/><ellipse cx="414" cy="1900.8" fill="#EB937F" rx="13.2" ry="13.2" style="stroke: #EB93DF; stroke-width: 1.2;"/><path d="M412.2,1902 L412.2,1904.4 L417,1904.4 L417,1903.2 L417,1902.6187 L417.75,1902 L418.2,1902 L418.65,1902 L419.4,1902.6187 L419.4,1903.2 L419.4,1906.8 L409.8,1906.8 L409.2188,1906.8 L408.6,1906.05 L408.6,1905.6 L408.6,1905.15 L409.2188,1904.4 L409.8,1904.4 L409.8,1904.4 L409.8,1897.2 L409.8,1897.2 L409.2188,1897.2 L408.6,1896.45 L408.6,1896 L408.6,1895.55 L409.2188,1894.8 L409.8,1894.8 L419.4,1894.8 L419.4,1898.4 L419.4,1898.9812 L418.65,1899.6 L418.2,1899.6 L417.75,1899.6 L417,1898.9812 L417,1898.4 L417,1897.2 L412.2,1897.2 L412.2,1899.6 L413.4,1899.6 L413.4,1899.0188 L413.4,1899.0188 L414.15,1898.4 L414.6,1898.4 L415.05,1898.4 L415.8,1899.0188 L415.8,1899.6 L415.8,1902 L415.8,1902.5813 L415.05,1903.2 L415.05,1903.2 L414.6,1903.2 L414.15,1903.2 L413.4,1902.5813 L413.4,1902.5813 L413.4,1902 L412.2,1902 Z "/><ellipse cx="436.8" cy="1900.2" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="61.2" x="444" y="1906.6922">LogRead</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="397.2" x2="507.6" y1="1920" y2="1920"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="46.8" x="403.2" y="1938.5027">SINGLE,</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="24" x="403.2" y="1955.1059">ALL</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="397.2" x2="507.6" y1="1962.8062" y2="1962.8062"/><!--MD5=[50d6b8eba543a732d1dd3c761d982397]
class NegativeBalance--><rect fill="#FEFECE" height="90.8062" id="NegativeBalance" style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" width="163.2" x="345.6" y="1708.8"/><ellipse cx="363.6" cy="1728" fill="#EB937F" rx="13.2" ry="13.2" style="stroke: #EB93DF; stroke-width: 1.2;"/><path d="M361.8,1729.2 L361.8,1731.6 L366.6,1731.6 L366.6,1730.4 L366.6,1729.8188 L367.35,1729.2 L367.8,1729.2 L368.25,1729.2 L369,1729.8188 L369,1730.4 L369,1734 L359.4,1734 L358.8187,1734 L358.2,1733.25 L358.2,1732.8 L358.2,1732.35 L358.8187,1731.6 L359.4,1731.6 L359.4,1731.6 L359.4,1724.4 L359.4,1724.4 L358.8187,1724.4 L358.2,1723.65 L358.2,1723.2 L358.2,1722.75 L358.8187,1722 L359.4,1722 L369,1722 L369,1725.6 L369,1726.1812 L368.25,1726.8 L367.8,1726.8 L367.35,1726.8 L366.6,1726.1812 L366.6,1725.6 L366.6,1724.4 L361.8,1724.4 L361.8,1726.8 L363,1726.8 L363,1726.2188 L363,1726.2188 L363.75,1725.6 L364.2,1725.6 L364.65,1725.6 L365.4,1726.2188 L365.4,1726.8 L365.4,1729.2 L365.4,1729.7813 L364.65,1730.4 L364.65,1730.4 L364.2,1730.4 L363.75,1730.4 L363,1729.7813 L363,1729.7813 L363,1729.2 L361.8,1729.2 Z "/><ellipse cx="386.4" cy="1727.4" fill="#84BE84" rx="3.6" ry="3.6" style="stroke: #038048; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="14.4" lengthAdjust="spacingAndGlyphs" textLength="111.6" x="393.6" y="1733.8922">NegativeBalance</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="346.8" x2="507.6" y1="1747.2" y2="1747.2"/><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="72" x="352.8" y="1765.7027">FORBIDDEN,</text><text fill="#000000" font-family="sans-serif" font-size="13.2" lengthAdjust="spacingAndGlyphs" textLength="78" x="352.8" y="1782.3059">AUTHORIZED</text><line style="stroke: #D4AC0D; stroke-width: 1.7999999999999998;" x1="346.8" x2="507.6" y1="1790.0063" y2="1790.0063"/><!--MD5=[b5831fe2f38c217483a231289f3a8748]
link PoSecuritySettingBuilder to PoSecuritySetting--><path d="M534.2952,481.776 C535.4004,512.94 536.5344,544.92 537.5904,574.728 " fill="none" id="PoSecuritySettingBuilder-PoSecuritySetting" style="stroke: #A80036; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="32.4" x="537.6" y="534.5941">build</text><polygon fill="#000000" points="548.4,545.2219,552,552.4219,555.6,545.2219,548.4,545.2219" style="stroke: #000000; stroke-width: 1.2;"/><!--MD5=[a40139effe78355afd96e1fe38f816a4]
reverse link PoSecuritySetting to SamResource--><path d="M754.6884,711.6 C763.236,711.6 771.7836,711.6 780.3312,711.6 " fill="none" id="PoSecuritySetting&lt;-SamResource" style="stroke: #A80036; stroke-width: 1.2;"/><polygon fill="#FFFFFF" points="738.7824,711.6,745.9824,716.4,753.1824,711.6,745.9824,706.8,738.7824,711.6" style="stroke: #A80036; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="8.4" x="747.98" y="708.1723">1</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="26.4" x="744.7576" y="728.4978">0..1</text><!--MD5=[f5f07a045c16f9b5b991b6ad223e4b75]
reverse link SamResource to CalypsoSam--><path d="M1026.1908,711.6 C1034.6772,711.6 1043.1636,711.6 1051.65,711.6 " fill="none" id="SamResource&lt;-CalypsoSam" style="stroke: #A80036; stroke-width: 1.2;"/><polygon fill="#FFFFFF" points="1010.4,711.6,1017.6,716.4,1024.8,711.6,1017.6,706.8,1010.4,711.6" style="stroke: #A80036; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="8.4" x="1019.5416" y="707.8904">1</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="8.4" x="1033.8077" y="708.0334">1</text><!--MD5=[49b2cd243b315032ac87ae560f8bd7c4]
reverse link SvSetting to Operation--><path d="M212.4576,1800.3 C202.4328,1825.2732 189.9792,1856.298 179.9532,1881.276 " fill="none" id="SvSetting&lt;-Operation" style="stroke: #A80036; stroke-width: 1.2;"/><ellipse cx="215.6813" cy="1792.266" fill="#FFFFFF" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="212.1046" x2="219.258" y1="1801.1749" y2="1783.3572"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="206.7725" x2="224.5901" y1="1788.6893" y2="1795.8427"/><!--MD5=[ad0f2bead1761192d1c3cbd4a713f69a]
reverse link SvSetting to Action--><path d="M250.6944,1799.9364 C262.1544,1824.972 276.438,1856.1768 287.928,1881.276 " fill="none" id="SvSetting&lt;-Action" style="stroke: #A80036; stroke-width: 1.2;"/><ellipse cx="247.1012" cy="1792.0862" fill="#FFFFFF" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="251.0967" x2="243.1056" y1="1800.8152" y2="1783.3572"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="238.3722" x2="255.8302" y1="1796.0818" y2="1788.0906"/><!--MD5=[40b37511570e7b53b6592a746222781a]
reverse link SvSetting to LogRead--><path d="M280.9632,1794.4104 C315.186,1820.6784 360.4344,1855.41 395.8512,1882.5948 " fill="none" id="SvSetting&lt;-LogRead" style="stroke: #A80036; stroke-width: 1.2;"/><ellipse cx="274.1772" cy="1789.2026" fill="#FFFFFF" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="281.7925" x2="266.562" y1="1795.0479" y2="1783.3572"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="268.3319" x2="280.0226" y1="1796.8178" y2="1781.5873"/><!--MD5=[8d1c764bcc19989851e984ffe55e2961]
reverse link SvSetting to NegativeBalance--><path d="M321.1764,1754.4 C329.1972,1754.4 337.218,1754.4 345.24,1754.4 " fill="none" id="SvSetting&lt;-NegativeBalance" style="stroke: #A80036; stroke-width: 1.2;"/><ellipse cx="312.6468" cy="1754.4" fill="#FFFFFF" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="322.2468" x2="303.0468" y1="1754.4" y2="1754.4"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="312.6468" x2="312.6468" y1="1764" y2="1744.8"/><!--MD5=[e4e6b0c197a4fe408c8d4c7214bc9356]
link PoResource to PoTransaction--><path d="M232.1388,757.248 C266.9544,793.62 319.854,848.88 378.2892,909.936 " fill="none" id="PoResource-&gt;PoTransaction" style="stroke: #A80036; stroke-width: 1.2;"/><polygon fill="#FFFFFF" points="389.262,921.396,387.7526,912.8753,379.3069,910.9914,380.8162,919.5121,389.262,921.396" style="stroke: #A80036; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="8.4" x="230.0887" y="782.6601">1</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="8.4" x="371.8058" y="908.7704">1</text><!--MD5=[127e9a2466ec7ea86d71a4cf335a990c]
link PoResource to PoSecuritySetting--><!--MD5=[7ef23bb65cbd7f21990abf12f0f9fb41]
link PoSecuritySetting to PoTransaction--><path d="M586.8444,848.46 C592.8072,866.652 599.136,885.972 605.6796,905.952 " fill="none" id="PoSecuritySetting-&gt;PoTransaction" style="stroke: #A80036; stroke-width: 1.2;"/><polygon fill="#FFFFFF" points="610.7232,921.336,613.0369,912.9977,606.2298,907.655,603.9162,915.9933,610.7232,921.336" style="stroke: #A80036; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="26.4" x="562.446" y="874.0554">0..1</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="8.4" x="599.1496" y="908.7088">1</text><!--MD5=[4e36a4e3a201b7955d2f14bdee0043a9]
reverse link PoTransaction to SessionState--><path d="M648.9396,1645.1208 C644.6448,1665.714 640.7412,1684.4316 637.434,1700.2872 " fill="none" id="PoTransaction&lt;-SessionState" style="stroke: #A80036; stroke-width: 1.2;"/><ellipse cx="650.6742" cy="1636.8017" fill="#FFFFFF" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="648.714" x2="652.6344" y1="1646.1995" y2="1627.404"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="641.2765" x2="660.072" y1="1634.8416" y2="1638.7619"/><!--MD5=[ce3c63ddc54d4d675759c68b3655a59d]
reverse link PoTransaction to SessionSetting--><path d="M811.3848,1644.9828 C818.9736,1677.8112 825.4632,1705.884 829.9284,1725.2064 " fill="none" id="PoTransaction&lt;-SessionSetting" style="stroke: #A80036; stroke-width: 1.2;"/><ellipse cx="809.4839" cy="1636.7573" fill="#FFFFFF" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="811.6462" x2="807.3216" y1="1646.1106" y2="1627.404"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="800.1306" x2="818.8372" y1="1638.9196" y2="1634.595"/><!--MD5=[01907a979ee07ab82f1dc532a4541c2c]
reverse link SessionSetting to EncryptionMode--><path d="M891.9612,1793.8992 C929.5428,1819.806 979.3164,1854.1152 1018.7184,1881.276 " fill="none" id="SessionSetting&lt;-EncryptionMode" style="stroke: #A80036; stroke-width: 1.2;"/><ellipse cx="884.5712" cy="1788.8057" fill="#FFFFFF" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="892.4752" x2="876.6672" y1="1794.2543" y2="1783.3572"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="879.1227" x2="890.0197" y1="1796.7097" y2="1780.9017"/><!--MD5=[19a5bab6cb0e733f5b38e95cd959a25a]
reverse link SessionSetting to ModificationMode--><path d="M848.2368,1801.0284 C854.7108,1825.8756 862.7016,1856.5404 869.1468,1881.276 " fill="none" id="SessionSetting&lt;-ModificationMode" style="stroke: #A80036; stroke-width: 1.2;"/><ellipse cx="846.0533" cy="1792.6469" fill="#FFFFFF" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="848.4743" x2="843.6324" y1="1801.9367" y2="1783.3572"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="836.7636" x2="855.3431" y1="1795.0679" y2="1790.226"/><!--MD5=[0e9a2e2ec4d6aea28d869b2d373dbe85]
reverse link SessionSetting to RatificationMode--><path d="M797.6088,1796.7072 C773.508,1822.2468 742.5192,1855.0848 717.8052,1881.276 " fill="none" id="SessionSetting&lt;-RatificationMode" style="stroke: #A80036; stroke-width: 1.2;"/><ellipse cx="803.6181" cy="1790.3396" fill="#FFFFFF" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="797.0297" x2="810.2064" y1="1797.322" y2="1783.3572"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="796.6357" x2="810.6005" y1="1783.7513" y2="1796.9279"/><!--MD5=[d0f8f68742f1a8058f4f2e5a0ad06650]
reverse link SessionSetting to AccessLevel--><path d="M909.3312,1791.0708 C922.854,1797.162 936.9552,1803.198 950.4,1808.4 C1051.5528,1847.5392 1119.0312,1794.1572 1183.2,1881.6 C1214.748,1924.5984 1204.7364,1952.808 1183.2,2001.6 C1175.532,2018.9712 1163.1732,2034.6216 1149.4752,2048.0952 " fill="none" id="SessionSetting&lt;-AccessLevel" style="stroke: #A80036; stroke-width: 1.2;"/><ellipse cx="901.3283" cy="1787.3917" fill="#FFFFFF" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="910.051" x2="892.6056" y1="1791.4011" y2="1783.3824"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="897.319" x2="905.3376" y1="1796.1144" y2="1778.669"/><!--MD5=[37e957bec1fd56bfe0d2d70b2ed06b69]
link EncryptionMode to AccessLevel--><!--MD5=[aad50e08903197c6896398c3f9217d50]
reverse link SessionSetting to AuthenticationMode--><path d="M759.8436,1791.1152 C683.2536,1826.8224 576.3612,1877.2152 573.6,1881.6 C545.1864,1926.7344 544.1856,1957.1112 573.6,2001.6 C605.4996,2049.8472 666.0264,2074.7964 717.5292,2087.6592 " fill="none" id="SessionSetting&lt;-AuthenticationMode" style="stroke: #A80036; stroke-width: 1.2;"/><ellipse cx="767.94" cy="1787.3455" fill="#FFFFFF" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="759.2376" x2="776.6424" y1="1791.3987" y2="1783.2924"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="763.8868" x2="771.9931" y1="1778.6431" y2="1796.048"/><!--MD5=[6952bc2877cf5d205c9a3c02c8dd195c]
link ModificationMode to AuthenticationMode--><!--MD5=[079f273270ef1dd73893779fe3d467bc]
reverse link PoTransaction to PinTransmissionMode--><path d="M907.7304,1641.69 C914.1864,1649.5008 920.8104,1657.086 927.6,1664.4 C930.66,1667.6964 963.7644,1688.1708 997.4592,1708.6296 " fill="none" id="PoTransaction&lt;-PinTransmissionMode" style="stroke: #A80036; stroke-width: 1.2;"/><ellipse cx="902.2891" cy="1634.8924" fill="#FFFFFF" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="908.2887" x2="896.2896" y1="1642.3868" y2="1627.398"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="894.7947" x2="909.7835" y1="1640.8919" y2="1628.8929"/><!--MD5=[746f3c5b2505d7b38384202071141ba9]
reverse link PoTransaction to SvSetting--><path d="M347.8896,1639.9776 C311.5932,1674.9552 280.5108,1704.9096 259.4496,1725.2064 " fill="none" id="PoTransaction&lt;-SvSetting" style="stroke: #A80036; stroke-width: 1.2;"/><ellipse cx="354.0244" cy="1634.0653" fill="#FFFFFF" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="347.1117" x2="360.9372" y1="1640.7267" y2="1627.404"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="347.3631" x2="360.6858" y1="1627.1526" y2="1640.9781"/><!--MD5=[28e38a2b5aeddf77f446bb48690e6362]
link SessionState to SessionSetting--><!--MD5=[bc4e75526f74fbb68a5aed8e4c56686a]
link SessionSetting to PinTransmissionMode--><!--MD5=[15b34b46d09c17d92f3246bd8d6b690e]
link PinTransmissionMode to SvSetting--><!--MD5=[3429ec821e60fb1fffd23386c89f33c5]
link PoTransaction to SelectFileControl--><path d="M1092.8328,1469.5548 C1181.6748,1543.3908 1251.6,1638.0732 1251.6,1753.2 C1251.6,1753.2 1251.6,1753.2 1251.6,2103.6 C1251.6,2141.256 1250.208,2154.2256 1228.8,2185.2 C1214.844,2205.3828 1195.452,2223.0444 1175.6868,2237.6664 " fill="none" id="PoTransaction-SelectFileControl" style="stroke: #A80036; stroke-width: 1.2;"/><!--MD5=[30641f45b0628209a5479aad6dfa6f2f]
link PoTransaction to ChannelControl--><path d="M1092.6312,1440.4224 C1203.2796,1516.4352 1296,1619.8992 1296,1753.2 C1296,1753.2 1296,1753.2 1296,2103.6 C1296,2150.1588 1296,2203.446 1296,2240.1204 " fill="none" id="PoTransaction-ChannelControl" style="stroke: #A80036; stroke-width: 1.2;"/><!--MD5=[75cf09f748786ce5d6dd001ad977eb2a]
link AuthenticationMode to SelectFileControl--><!--MD5=[816c1fefc9463d481f66103582bcea7c]
link SelectFileControl to ChannelControl--><!--MD5=[739e756df0b61cdb3e373e5e091672a0]
@startuml
skinparam ClassBorderColor #D4AC0D
skinparam stereotypeABorderColor #A9DCDF
skinparam stereotypeIBorderColor #B4A7E5
skinparam stereotypeCBorderColor #ADD1B2
skinparam stereotypeEBorderColor #EB93DF
skinparam shadowing false

skinparam StateBorderColor #D4AC0D
skinparam ActivityBorderColor #D4AC0D

skinparam ClassBackgroundColor<<red>> #FDEDEC
skinparam ClassBorderColor<<red>> #E74C3C
hide <<red>> stereotype
skinparam ClassBackgroundColor<<purple>> #F4ECF7
skinparam ClassBorderColor<<purple>> #8E44AD
hide <<purple>> stereotype
skinparam ClassBackgroundColor<<blue>> #EBF5FB
skinparam ClassBorderColor<<blue>> #3498DB
hide <<blue>> stereotype
skinparam ClassBackgroundColor<<green>> #EAFAF1
skinparam ClassBorderColor<<green>> #2ECC71
hide <<green>> stereotype

skinparam ClassBackgroundColor<<orange>> #FDF2E9
skinparam ClassBorderColor<<orange>> #E67E22
hide <<orange>> stereotype

skinparam ClassBackgroundColor<<grey>> #EAECEE
skinparam ClassBorderColor<<grey>> #2C3E50
hide <<grey>> stereotype

package org.keyple.calypso #FFFFFF {
  package transaction #FFFFFF {
+class "static <b>final</b> PoSecuritySettingBuilder" as PoSecuritySettingBuilder {
  -final SeResource<CalypsoSam> samResource
  -List<Byte> authorizedKvcList
  -final EnumMap<AccessLevel, Byte> defaultKif
  -final EnumMap<AccessLevel, Byte> defaultKvc
  -final EnumMap<AccessLevel, Byte> defaultKeyRecordNumber
  ModificationMode sessionModificationMode = ATOMIC
  RatificationMode ratificationMode = CLOSE_RATIFIED

  +PoSecuritySettingBuilder(SeResource<CalypsoSam> samResource)

  +PoSecuritySettingBuilder sessionModificationMode(ModificationMode sessionModificationMode)
  +PoSecuritySettingBuilder ratificationMode(RatificationMode ratificationMode)
  +PoSecuritySettingBuilder sessionDefaultKif(AccessLevel sessionAccessLevel, byte kif)
  +PoSecuritySettingBuilder sessionDefaultKvc(AccessLevel sessionAccessLevel, byte kvc)
  +PoSecuritySettingBuilder sessionDefaultKeyRecordNumber(AccessLevel sessionAccessLevel,
    byte keyRecordNumber)
  +PoSecuritySettingBuilder sessionAuthorizedKvcList(List<Byte> authorizedKvcList)

  +PoSecuritySetting build()
}

+class "<b>final</b> PoSecuritySetting" as PoSecuritySetting {
  +PoSecuritySetting(SamResource samResource);


  #ModificationMode getSessionModificationMode()
  #RatificationMode getSessionRatificationMode()
  #Byte getSessionDefaultKif(AccessLevel level)
  #Byte getSessionDefaultKvc(AccessLevel level)
  #Byte getSessionDefaultKeyRecordNumber(AccessLevel level)
  #Boolean isSessionKvcAuthorized(byte kvc)

  #PinTransmissionMode getPinTransmissionMode()

  #LogRead getSvGetLogReadMode()
  #NegativeBalance getSvNegativeBalance()
  #Boolean isSvKvcAuthorized(byte kvc)
}

note as N1
Default values in PoTransaction if PoSecuritySetting doesn't specify it:
  - session ModificationMode as ATOMIC
  - session RatificationMode as CLOSE_RATIFIED
  - PinTransmissionMode as ENCRYPTED if PoSecurity defined
  - any KIF/KVC values are authorized
  - no verification is done for: HCE token expiration, revoked PO or SAM
end note

    PoSecuritySettingBuilder .right. N1
    PoSecuritySettingBuilder -down- PoSecuritySetting : build >

    together {
      +class "SeResource<CalypsoSam>" as SamResource {
        +SeResource(<color:red>SeReader seReader</color>,
          CalypsoSam sam);
      }

      +class "<b>final</b> CalypsoSam" as CalypsoSam {
        ~CalypsoSam(<color:red>SeResponse selectionResponse</color>)

        +SamRevision getSamRevision()
        +byte[] getSerialNumber()
        +byte getPlatform()
        +byte getApplicationType()
        +byte getApplicationSubType()
        +byte getSoftwareIssuer()
      }
    }

    PoSecuritySetting "1 " o-right- " 0..1" SamResource
    SamResource "1" o- "1" CalypsoSam

    +class "SeResource<CalypsoPo>" as PoResource {
      +SeResource(<color:red>SeReader seReader</color>,
        CalypsoPo po);
    }

+class PoTransaction {
  +PoTransaction(PoResource poResource, PoSecuritySetting[0..1] securitySetting)

  +<b>final</b> processPoCommands(ChannelControl channel)
  +<b>final</b> processOpening(AccessLevel level)
  +<b>final</b> processPoCommandsInSession()
  +<b>final</b> processClosing(ChannelControl channel)
  +<b>final</b> processCancel(ChannelControl channel)

  +<b>final</b> prepareCheckPinStatus()
  +<b>final</b> processVerifyPin(String pin)
  +<b>final</b> processVerifyPin(byte[] pin)

  +<b>final</b> prepareSvGet(SvSetting.Operation operation, SvSetting.Action action)
  +<b>final</b> prepareSvReload(int amount, int date, int time, String free)
  +<b>final</b> prepareSvReload(int amount, byte[] date, byte[] time, byte[] free)
  +<b>final</b> prepareSvReload(int amount)
  +<b>final</b> prepareSvDebit(int amount, int date, int time)
  +<b>final</b> prepareSvDebit(int amount, byte[] date, byte[] time)
  +<b>final</b> prepareSvDebit(int amount)

  +<b>final</b> prepareSelectFile(short lid)
  +<b>final</b> prepareSelectFile(byte[] lid)
  +<b>final</b> prepareSelectFile(SelectFileControl control)
  +<b>final</b> prepareReadRecordFile(byte sfi, int recordNumber)
  +<b>final</b> prepareReadRecordFile(byte sfi, int firstRecordNumber, int numberOfRecords, int recordSize))
  +<b>final</b> prepareReadSubRecordFile(byte sfi, int firstRecordNumber, int numberOfRecord, int recordOffset, int recordLength)
  +<b>final</b> prepareReadBinaryFile(byte sfi, int dataLength, int[0..1] dataOffset)
  +<b>final</b> prepareReadCounterFile(byte sfi, int countersNumber)
  +<b>final</b> prepareAppendRecord(byte sfi, byte[] recordData)
  +<b>final</b> prepareUpdateRecord(byte sfi, int recordNumber, byte[] recordData)
  +<b>final</b> prepareWriteRecord(byte sfi, int recordNumber, byte[] recordData)
  +<b>final</b> prepareUpdateBinaryFile(byte sfi, byte[] fileData, int[0..1] dataOffset)
  +<b>final</b> prepareWriteBinaryFile(byte sfi, byte[] fileData, int[0..1] dataOffset)
  +<b>final</b> prepareIncreaseCounter(byte sfi, int counterNumber, int incValue)
  +<b>final</b> prepareDecreaseCounter(byte sfi, int counterNumber, int decValue)
  +<b>final</b> prepareSetCounter(byte sfi, int counterNumber, int newValue)

  +<b>final</b> prepareInvalidate()
  +<b>final</b> prepareRehabilitate()

}
-enum SessionState {
  SESSION_UNITIALIZED,
  SESSION_OPEN,
  SESSION_CLOSED
}

+class "<b>final</b> SessionSetting" as SessionSetting {
}

+enum AccessLevel {
  SESSION_LVL_PERSO("perso", byte 0x01),
  SESSION_LVL_LOAD("load", byte 0x02),
  SESSION_LVL_DEBIT("debit", byte 0x03)
}

+enum ModificationMode {
  ATOMIC,
  MULTIPLE
}

+enum RatificationMode {
  CLOSE_RATIFIED,
  CLOSE_NOT_RATIFIED
}

+enum EncryptionMode {
  ACTIVATE,
  DEACTIVATE
}

+enum AuthenticationMode {
  REQUESTED,
  NOT_REQUESTED
}

+enum PinTransmissionMode {
  PLAIN,
  ENCRYPTED
}

together {
  +class "<b>final</b> SvSetting" as SvSetting {
  }

  +enum Operation {
    RELOAD,
    DEBIT
  }

  +enum Action {
    DO,
    UNDO
  }

  +enum LogRead {
    SINGLE,
    ALL
  }

  +enum NegativeBalance {
    FORBIDDEN,
    AUTHORIZED
  }
}

    SvSetting +-down- Operation
    SvSetting +-down- Action
    SvSetting +-down- LogRead
    SvSetting +-right- NegativeBalance

    PoResource "1" - -o "1" PoTransaction
    PoResource -right[hidden]- PoSecuritySetting
    PoTransaction "1" o-up- "0..1" PoSecuritySetting

    PoTransaction +-down- SessionState

    PoTransaction +-down- SessionSetting
    SessionSetting +-down- EncryptionMode
    SessionSetting +-down- ModificationMode
    SessionSetting +-down- RatificationMode
    SessionSetting +- - AccessLevel
    EncryptionMode -down[hidden]- AccessLevel
    SessionSetting +- - AuthenticationMode
    ModificationMode -down[hidden]- AuthenticationMode

    PoTransaction +-down- PinTransmissionMode
    PoTransaction +-down- SvSetting

    SessionState -right[hidden]- SessionSetting
    SessionSetting -right[hidden]- PinTransmissionMode
    PinTransmissionMode -right[hidden]- SvSetting
  }

+enum SelectFileControl {
  FIRST_EF,
  NEXT_EF,
  CURRENT_DF
}

+enum ChannelControl {
  KEEP_OPEN
  CLOSE_AFTER
}
  PoTransaction - - SelectFileControl
  PoTransaction - - ChannelControl
  AuthenticationMode -down[hidden]- SelectFileControl
  ChannelControl -left[hidden]- SelectFileControl
}
@enduml

PlantUML version 1.2020.09(Sun May 10 14:51:06 MUT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.7+10-b765.64
Operating System: Windows 10
Default Encoding: Cp1252
Language: fr
Country: FR
--></g></svg>