<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1075px" preserveAspectRatio="none" style="width:1150px;height:1075px;" version="1.1" viewBox="0 0 1150 1075" width="1150px" zoomAndPan="magnify"><defs/><g><!--MD5=[c3c915b379c717332e210d38dcd6e8a2]
cluster org.eclipse.keyple.core--><polygon fill="#FFFFFF" points="22,24,193,24,200,47.6094,1128,47.6094,1128,1063,22,1063,22,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="200" y1="47.6094" y2="47.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="165" x="26" y="40.5332">org.eclipse.keyple.core</text><!--MD5=[d7d97e45e091edffeb4e8c3bb1cf3c1a]
cluster plugin.factory--><polygon fill="#FFFFFF" points="351,68,453,68,460,91.6094,567,91.6094,567,196,351,196,351,68" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="351" x2="460" y1="91.6094" y2="91.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="355" y="84.5332">plugin.factory</text><!--MD5=[9d4f2f8fc0ef5fca8dbaabf8542dfdf0]
cluster reader--><polygon fill="#FFFFFF" points="46,246,99,246,106,269.6094,1104,269.6094,1104,1039,46,1039,46,246" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="46" x2="106" y1="269.6094" y2="269.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="50" y="262.5332">reader</text><!--MD5=[2e31800f208179cab94650aeb782e4d8]
cluster event--><polygon fill="#FFFFFF" points="358,763,405,763,412,786.6094,1080,786.6094,1080,1015,358,1015,358,763" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="358" x2="412" y1="786.6094" y2="786.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="362" y="779.5332">event</text><!--MD5=[5c68026ea752d2e8f1e184b2d7c89ced]
class PluginFactory--><rect fill="#FEFECE" height="75.6719" id="PluginFactory" style="stroke: #D4AC0D; stroke-width: 1.5;" width="184" x="367" y="104"/><ellipse cx="411.75" cy="120" fill="#B4A7E5" rx="11" ry="11" style="stroke: #B4A7E5; stroke-width: 1.0;"/><path d="M412.75,117 L412.75,123 L414.75,123 L415.2344,123 L415.75,123.625 L415.75,124 L415.75,124.375 L415.2344,125 L414.75,125 L408.75,125 L408.2656,125 L407.75,124.375 L407.75,124 L407.75,123.625 L408.2656,123 L408.75,123 L410.75,123 L410.75,117 L408.75,117 L408.2656,117 L407.75,116.375 L407.75,116 L407.75,115.625 L408.2656,115 L408.75,115 L414.75,115 L415.2344,115 L415.75,115.625 L415.75,116 L415.75,116.375 L415.2344,117 L414.75,117 L412.75,117 Z "/><ellipse cx="437.25" cy="119.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="75" x="443.25" y="124.9102">PluginFactory</text><line style="stroke: #D4AC0D; stroke-width: 1.5;" x1="368" x2="550" y1="136" y2="136"/><line style="stroke: #D4AC0D; stroke-width: 1.5;" x1="368" x2="550" y1="144" y2="144"/><ellipse cx="378" cy="155" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="109" x="387" y="159.4189">String getPluginName()</text><ellipse cx="378" cy="168.8359" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="158" x="387" y="173.2549">ReaderPlugin getPluginInstance()</text><!--MD5=[bc3f57c567736ad71a70f1388d085699]
class SmartCardService--><rect fill="#FEFECE" height="208.3828" id="SmartCardService" style="stroke: #D4AC0D; stroke-width: 1.5;" width="298" x="532" y="282"/><ellipse cx="607.75" cy="302.0938" fill="#ADD1B2" rx="11" ry="11" style="stroke: #ADD1B2; stroke-width: 1.0;"/><path d="M609.75,298.5938 Q609.9531,298.0938 610.1875,297.8438 Q610.4219,297.5938 610.6875,297.5938 Q611.1563,297.5938 611.4531,297.875 Q611.75,298.1563 611.75,298.8125 L611.75,300.375 Q611.75,301.0313 611.4688,301.3125 Q611.1875,301.5938 610.75,301.5938 Q610.3594,301.5938 610.1094,301.4219 Q609.8594,301.25 609.75,300.7969 Q609.7031,300.4844 609.5313,300.3125 Q609.2188,299.9844 608.6563,299.7969 Q608.0938,299.5938 607.5313,299.5938 Q606.8281,299.5938 606.2344,299.875 Q605.6563,300.1563 605.2031,300.7813 Q604.75,301.4063 604.75,302.2656 L604.75,303.1875 Q604.75,304.2188 605.5938,304.9063 Q606.4375,305.5938 607.9375,305.5938 Q608.8281,305.5938 609.4531,305.3906 Q609.8125,305.2813 610.2188,304.9219 Q610.4844,304.7188 610.625,304.6563 Q610.7656,304.5938 610.9375,304.5938 Q611.2656,304.5938 611.5,304.8594 Q611.75,305.1094 611.75,305.4688 Q611.75,305.8125 611.4063,306.2188 Q610.9063,306.8125 610.1094,307.1406 Q609.0625,307.5938 607.7813,307.5938 Q606.2813,307.5938 605.0781,307 Q604.1094,306.5313 603.4219,305.5156 Q602.75,304.5 602.75,303.2969 L602.75,302.2031 Q602.75,300.9531 603.3438,299.8594 Q603.9531,298.7656 605,298.1875 Q606.0625,297.5938 607.25,297.5938 Q607.9688,297.5938 608.5938,297.8438 Q609.2188,298.0938 609.75,298.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="66" x="664.25" y="299.457">«Singleton»</text><ellipse cx="633.25" cy="309.1406" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="639.25" y="314.5508">final</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="666.25" y="314.5508">SmartCardService</text><line style="stroke: #D4AC0D; stroke-width: 1.5;" x1="533" x2="829" y1="322.1875" y2="322.1875"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="540" y="330.1875"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="23" x="552" y="337.6064">final</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="164" x="578" y="337.6064">SmartCardService uniqueInstance</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="540" y="344.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="552" y="351.4424">final</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="220" x="578" y="351.4424">ConcurrentMap&lt;String, ReaderPlugin&gt; plugins</text><line style="stroke: #D4AC0D; stroke-width: 1.5;" x1="533" x2="829" y1="357.8594" y2="357.8594"/><ellipse cx="543" cy="368.8594" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="155" x="552" y="373.2783">SmartCardService getInstance()</text><ellipse cx="543" cy="382.6953" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="92" x="552" y="387.1143">String getVersion()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="555" y="400.9502"/><ellipse cx="543" cy="410.3672" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="272" x="552" y="414.7861">ReaderPlugin registerPlugin(PluginFactory pluginFactory)</text><ellipse cx="543" cy="424.2031" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="195" x="552" y="428.6221">boolean isRegistered(String pluginName)</text><ellipse cx="543" cy="438.0391" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="212" x="552" y="442.458">boolean unregisterPlugin(String pluginName)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="555" y="456.2939"/><ellipse cx="543" cy="465.7109" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="174" x="552" y="470.1299">ReaderPlugin getPlugin(String name)</text><ellipse cx="543" cy="479.5469" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="552" y="483.9658">Map&lt;String, ReaderPlugin&gt; getPlugins()</text><!--MD5=[a0e88443257adb8def549c32ec694d43]
class ReaderPlugin--><rect fill="#F0FFFF" height="117.1797" id="ReaderPlugin" style="stroke: #0000FF; stroke-width: 1.5;" width="217" x="391.5" y="575"/><ellipse cx="452.25" cy="591" fill="#B4A7E5" rx="11" ry="11" style="stroke: #B4A7E5; stroke-width: 1.0;"/><path d="M453.25,588 L453.25,594 L455.25,594 L455.7344,594 L456.25,594.625 L456.25,595 L456.25,595.375 L455.7344,596 L455.25,596 L449.25,596 L448.7656,596 L448.25,595.375 L448.25,595 L448.25,594.625 L448.7656,594 L449.25,594 L451.25,594 L451.25,588 L449.25,588 L448.7656,588 L448.25,587.375 L448.25,587 L448.25,586.625 L448.7656,586 L449.25,586 L455.25,586 L455.7344,586 L456.25,586.625 L456.25,587 L456.25,587.375 L455.7344,588 L455.25,588 L453.25,588 Z "/><ellipse cx="477.75" cy="590.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="76" x="483.75" y="595.9102">ReaderPlugin</text><line style="stroke: #0000FF; stroke-width: 1.5;" x1="392.5" x2="607.5" y1="607" y2="607"/><line style="stroke: #0000FF; stroke-width: 1.5;" x1="392.5" x2="607.5" y1="615" y2="615"/><ellipse cx="402.5" cy="626" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="411.5" y="630.4189">String getName()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="414.5" y="644.2549"/><ellipse cx="402.5" cy="653.6719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="191" x="411.5" y="658.0908">Map&lt;String, CardReader&gt; getReaders()</text><ellipse cx="402.5" cy="667.5078" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="150" x="411.5" y="671.9268">Set&lt;String&gt; getReaderNames()</text><ellipse cx="402.5" cy="681.3438" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="176" x="411.5" y="685.7627">CardReader getReader(String name)</text><!--MD5=[9b9eb2a75cf02134ca888acb9ec1b2e1]
class CardReader--><rect fill="#EEFFEE" height="131.0156" id="CardReader" style="stroke: #008000; stroke-width: 1.5;" width="360" x="688" y="568"/><ellipse cx="824.25" cy="584" fill="#B4A7E5" rx="11" ry="11" style="stroke: #B4A7E5; stroke-width: 1.0;"/><path d="M825.25,581 L825.25,587 L827.25,587 L827.7344,587 L828.25,587.625 L828.25,588 L828.25,588.375 L827.7344,589 L827.25,589 L821.25,589 L820.7656,589 L820.25,588.375 L820.25,588 L820.25,587.625 L820.7656,587 L821.25,587 L823.25,587 L823.25,581 L821.25,581 L820.7656,581 L820.25,580.375 L820.25,580 L820.25,579.625 L820.7656,579 L821.25,579 L827.25,579 L827.7344,579 L828.25,579.625 L828.25,580 L828.25,580.375 L827.7344,581 L827.25,581 L825.25,581 Z "/><ellipse cx="849.75" cy="583.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="68" x="855.75" y="588.9102">CardReader</text><line style="stroke: #008000; stroke-width: 1.5;" x1="689" x2="1047" y1="600" y2="600"/><line style="stroke: #008000; stroke-width: 1.5;" x1="689" x2="1047" y1="608" y2="608"/><ellipse cx="699" cy="619" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="708" y="623.4189">String getName()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="711" y="637.2549"/><ellipse cx="699" cy="646.6719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="708" y="651.0908">boolean isCardPresent()</text><ellipse cx="699" cy="660.5078" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="334" x="708" y="664.9268">activateProtocol(String applicationReference, String pluginReference)</text><ellipse cx="699" cy="674.3438" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="230" x="708" y="678.7627">deactivateProtocol(String applicationReference)</text><ellipse cx="699" cy="688.1797" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="708" y="692.5986">boolean isContactlessTransmission()</text><!--MD5=[ec495f5f6ae18812fb155b23e8e93f55]
class ReaderPoolPlugin--><rect fill="#F0FFFF" height="89.5078" id="ReaderPoolPlugin" style="stroke: #0000FF; stroke-width: 1.5;" width="277" x="62.5" y="854"/><ellipse cx="140.75" cy="870" fill="#B4A7E5" rx="11" ry="11" style="stroke: #B4A7E5; stroke-width: 1.0;"/><path d="M141.75,867 L141.75,873 L143.75,873 L144.2344,873 L144.75,873.625 L144.75,874 L144.75,874.375 L144.2344,875 L143.75,875 L137.75,875 L137.2656,875 L136.75,874.375 L136.75,874 L136.75,873.625 L137.2656,873 L137.75,873 L139.75,873 L139.75,867 L137.75,867 L137.2656,867 L136.75,866.375 L136.75,866 L136.75,865.625 L137.2656,865 L137.75,865 L143.75,865 L144.2344,865 L144.75,865.625 L144.75,866 L144.75,866.375 L144.2344,867 L143.75,867 L141.75,867 Z "/><ellipse cx="166.25" cy="869.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="101" x="172.25" y="874.9102">ReaderPoolPlugin</text><line style="stroke: #0000FF; stroke-width: 1.5;" x1="63.5" x2="338.5" y1="886" y2="886"/><line style="stroke: #0000FF; stroke-width: 1.5;" x1="63.5" x2="338.5" y1="894" y2="894"/><ellipse cx="73.5" cy="905" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="236" x="82.5" y="909.4189">SortedSet&lt;String&gt; getReaderGroupReferences()</text><ellipse cx="73.5" cy="918.8359" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="251" x="82.5" y="923.2549">CardReader allocateReader(String groupReference)</text><ellipse cx="73.5" cy="932.6719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="172" x="82.5" y="937.0908">releaseReader(CardReader reader)</text><!--MD5=[1fa9a61019755e60a0cb03f0bc3590aa]
class ObservablePlugin--><rect fill="#F0FFFF" height="103.3438" id="ObservablePlugin" style="stroke: #0000FF; stroke-width: 1.5;" width="263" x="374.5" y="847.5"/><ellipse cx="446.25" cy="863.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #B4A7E5; stroke-width: 1.0;"/><path d="M447.25,860.5 L447.25,866.5 L449.25,866.5 L449.7344,866.5 L450.25,867.125 L450.25,867.5 L450.25,867.875 L449.7344,868.5 L449.25,868.5 L443.25,868.5 L442.7656,868.5 L442.25,867.875 L442.25,867.5 L442.25,867.125 L442.7656,866.5 L443.25,866.5 L445.25,866.5 L445.25,860.5 L443.25,860.5 L442.7656,860.5 L442.25,859.875 L442.25,859.5 L442.25,859.125 L442.7656,858.5 L443.25,858.5 L449.25,858.5 L449.7344,858.5 L450.25,859.125 L450.25,859.5 L450.25,859.875 L449.7344,860.5 L449.25,860.5 L447.25,860.5 Z "/><ellipse cx="471.75" cy="863" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="100" x="477.75" y="868.4102">ObservablePlugin</text><line style="stroke: #0000FF; stroke-width: 1.5;" x1="375.5" x2="636.5" y1="879.5" y2="879.5"/><line style="stroke: #0000FF; stroke-width: 1.5;" x1="375.5" x2="636.5" y1="887.5" y2="887.5"/><ellipse cx="385.5" cy="898.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="394.5" y="902.9189">addObserver(</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="462.5" y="902.9189">final</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="488.5" y="902.9189">PluginObserver observer)</text><ellipse cx="385.5" cy="912.3359" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="86" x="394.5" y="916.7549">removeObserver(</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="480.5" y="916.7549">final</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="506.5" y="916.7549">PluginObserver observer)</text><ellipse cx="385.5" cy="926.1719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="84" x="394.5" y="930.5908">clearObservers()</text><ellipse cx="385.5" cy="940.0078" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="394.5" y="944.4268">int countObservers()</text><!--MD5=[e2341a3d5316e117132fc49473ae3219]
class ObservableReader--><rect fill="#EEFFEE" height="200.1953" id="ObservableReader" style="stroke: #008000; stroke-width: 1.5;" width="391" x="672.5" y="799"/><ellipse cx="805.25" cy="815" fill="#B4A7E5" rx="11" ry="11" style="stroke: #B4A7E5; stroke-width: 1.0;"/><path d="M806.25,812 L806.25,818 L808.25,818 L808.7344,818 L809.25,818.625 L809.25,819 L809.25,819.375 L808.7344,820 L808.25,820 L802.25,820 L801.7656,820 L801.25,819.375 L801.25,819 L801.25,818.625 L801.7656,818 L802.25,818 L804.25,818 L804.25,812 L802.25,812 L801.7656,812 L801.25,811.375 L801.25,811 L801.25,810.625 L801.7656,810 L802.25,810 L808.25,810 L808.7344,810 L809.25,810.625 L809.25,811 L809.25,811.375 L808.7344,812 L808.25,812 L806.25,812 Z "/><ellipse cx="830.75" cy="814.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="106" x="836.75" y="819.9102">ObservableReader</text><line style="stroke: #008000; stroke-width: 1.5;" x1="673.5" x2="1062.5" y1="831" y2="831"/><line style="stroke: #008000; stroke-width: 1.5;" x1="673.5" x2="1062.5" y1="839" y2="839"/><ellipse cx="683.5" cy="850" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="692.5" y="854.4189">addObserver(</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="760.5" y="854.4189">final</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="786.5" y="854.4189">ReaderObserver observer)</text><ellipse cx="683.5" cy="863.8359" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="86" x="692.5" y="868.2549">removeObserver(</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="778.5" y="868.2549">final</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="804.5" y="868.2549">ReaderObserver observer)</text><ellipse cx="683.5" cy="877.6719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="84" x="692.5" y="882.0908">clearObservers()</text><ellipse cx="683.5" cy="891.5078" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="692.5" y="895.9268">int countObservers()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="695.5" y="909.7627"/><ellipse cx="683.5" cy="919.1797" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="365" x="692.5" y="923.5986">setDefaultSelectionRequest(AbstractDefaultSelectionsRequest selectionsR,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="273" x="692.5" y="937.4346">NotificationMode notificationM, PollingMode[0..1] pollingM)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="695.5" y="951.2705"/><ellipse cx="683.5" cy="960.6875" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="213" x="692.5" y="965.1064">startCardDetection(PollingMode pollingMode)</text><ellipse cx="683.5" cy="974.5234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="97" x="692.5" y="978.9424">stopCardDetection()</text><ellipse cx="683.5" cy="988.3594" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="119" x="692.5" y="992.7783">finalizeCardProcessing()</text><!--MD5=[d1af863b55555745ec193cfe701b813f]
link SmartCardService to ReaderPlugin--><path d="M597.9047,499.7055 C597.9047,499.7055 564.936,544.424 550.387,564.157 " fill="none" id="SmartCardService-ReaderPlugin" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="542.496,574.861,551.0561,569.9903,545.4629,570.8364,544.6168,565.2432,542.496,574.861" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="545.4629" x2="550.2105" y1="570.8364" y2="564.397"/><polygon fill="#A80036" points="605.026,490.047,598.2459,492.5025,597.9047,499.7055,604.6849,497.25,605.026,490.047" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="580" y="534.4951">plugins</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="592.1896" y="511.7694">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="542.3705" y="564.245">*</text><!--MD5=[d167ff648091ea09406113fbeea757b8]
link ReaderPlugin to CardReader--><path d="M620.918,633.5 C620.918,633.5 656.863,633.5 674.842,633.5 " fill="none" id="ReaderPlugin-CardReader" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="687.944,633.5,678.944,629.5,682.944,633.5,678.944,637.5,687.944,633.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="682.944" x2="674.944" y1="633.5" y2="633.5"/><polygon fill="#A80036" points="608.918,633.5,614.918,637.5,620.918,633.5,614.918,629.5,608.918,633.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="626.75" y="626.9951">readers</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="616.4711" y="630.4634">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="675.2424" y="630.6647">*</text><!--MD5=[bc25a197e36279471f37427b8b5d69b0]
reverse link ReaderPlugin to ReaderPoolPlugin--><path d="M415.605,705.278 C396.551,721.49 376.493,738.74 358,755 C320.898,787.621 279.621,825.272 248.705,853.75 " fill="none" id="ReaderPlugin&lt;-ReaderPoolPlugin" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="411.189,699.844,430.969,692.244,420.246,710.52,411.189,699.844" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="385" y="743.4951">extends</text><!--MD5=[a087c8f219181ff1dbe7adabc28b3231]
reverse link ReaderPlugin to ObservablePlugin--><path d="M501.77,712.225 C502.763,755.849 503.974,809.03 504.845,847.296 " fill="none" id="ReaderPlugin&lt;-ObservablePlugin" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="494.767,712.155,501.309,692.001,508.763,711.836,494.767,712.155" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="503" y="743.4951">extends</text><!--MD5=[62457109ec23126117182205bf30d1e8]
reverse link CardReader to ObservableReader--><path d="M868,719.428 C868,744.791 868,772.816 868,798.999 " fill="none" id="CardReader&lt;-ObservableReader" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="861,719.297,868,699.297,875,719.297,861,719.297" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="869" y="743.4951">extends</text><!--MD5=[d842569d2f438607af8ed0fb4cdffa11]
link PluginFactory to SmartCardService--><path d="M492.959,180.018 C517.919,207.227 553.136,245.616 586.354,281.828 " fill="none" id="PluginFactory-SmartCardService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#000000" points="558.5,223,561.5,217,564.5,223,558.5,223" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="538" y="239.4951">registers</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="493.1694" y="201.1911">*</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="572.1464" y="271.0843">1</text><!--MD5=[8119e6da521221a00c7048597420cfa4]
link PluginFactory to ReaderPlugin--><path d="M455.104,180.235 C449.247,244.053 440.507,378.253 457,490 C460.944,516.723 468.837,545.381 476.795,569.939 " fill="none" id="PluginFactory-&gt;ReaderPlugin" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="478.387,574.795,479.3853,564.9969,476.8299,570.0436,471.7831,567.4883,478.387,574.795" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="458" y="391.4951">creates</text><polygon fill="#000000" points="475,400.3516,478,406.3516,481,400.3516,475,400.3516" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="446.9253" y="201.153">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="468.3264" y="564.1709">1</text><!--MD5=[10808db86287c4ef0d8e65b4967d5e21]
@startuml
skinparam ClassBorderColor #D4AC0D
skinparam stereotypeABorderColor #A9DCDF
skinparam stereotypeIBorderColor #B4A7E5
skinparam stereotypeCBorderColor #ADD1B2
skinparam stereotypeEBorderColor #EB93DF
skinparam shadowing false

skinparam StateBorderColor #D4AC0D
skinparam ActivityBorderColor #D4AC0D

skinparam ClassBackgroundColor<<red>> #FDEDEC
skinparam ClassBorderColor<<red>> #E74C3C
hide <<red>> stereotype
skinparam ClassBackgroundColor<<purple>> #F4ECF7
skinparam ClassBorderColor<<purple>> #8E44AD
hide <<purple>> stereotype
skinparam ClassBackgroundColor<<blue>> #EBF5FB
skinparam ClassBorderColor<<blue>> #3498DB
hide <<blue>> stereotype
skinparam ClassBackgroundColor<<green>> #EAFAF1
skinparam ClassBorderColor<<green>> #2ECC71
hide <<green>> stereotype

skinparam ClassBackgroundColor<<orange>> #FDF2E9
skinparam ClassBorderColor<<orange>> #E67E22
hide <<orange>> stereotype

skinparam ClassBackgroundColor<<grey>> #EAECEE
skinparam ClassBorderColor<<grey>> #2C3E50
hide <<grey>> stereotype

package org.eclipse.keyple.core #FFFFFF {
  package plugin.factory #FFFFFF {
+interface PluginFactory {
  +String getPluginName()
  +ReaderPlugin getPluginInstance()
}
  }
  package reader #FFFFFF {
+class "<b>final</b> SmartCardService" as SmartCardService << Singleton >> {
  -<b>final</b> {static}SmartCardService uniqueInstance
  -<b>final</b> ConcurrentMap<String, ReaderPlugin> plugins
  +{static}SmartCardService getInstance()
  +String getVersion()

  +ReaderPlugin registerPlugin(PluginFactory pluginFactory)
  +boolean isRegistered(String pluginName)
  +boolean unregisterPlugin(String pluginName)

  +ReaderPlugin getPlugin(String name)
  +Map<String, ReaderPlugin> getPlugins()
}
+interface ReaderPlugin {
  +String getName()

  +Map<String, CardReader> getReaders()
  +Set<String> getReaderNames()
  +CardReader getReader(String name)
}
+interface CardReader {
  +String getName()

  +boolean isCardPresent()
  +activateProtocol(String applicationReference, String pluginReference)
  +deactivateProtocol(String applicationReference)
  +boolean isContactlessTransmission()
}

    SmartCardService "1" *-down-> "*" ReaderPlugin : plugins
    ReaderPlugin "1" *-right-> "*" CardReader : readers

+interface ReaderPoolPlugin {
  +SortedSet<String> getReaderGroupReferences()
  +CardReader allocateReader(String groupReference)
  +releaseReader(CardReader reader)
}
    ReaderPlugin <|- - ReaderPoolPlugin : extends

    package event #FFFFFF {
+interface ObservablePlugin {
  +addObserver(<b>final</b> PluginObserver observer)
  +removeObserver(<b>final</b> PluginObserver observer)
  +clearObservers()
  +int countObservers()
}
+interface ObservableReader {
  +addObserver(<b>final</b> ReaderObserver observer)
  +removeObserver(<b>final</b> ReaderObserver observer)
  +clearObservers()
  +int countObservers()

  +setDefaultSelectionRequest(AbstractDefaultSelectionsRequest selectionsR,
    NotificationMode notificationM, PollingMode[0..1] pollingM)

  +startCardDetection(PollingMode pollingMode)
  +stopCardDetection()
  +finalizeCardProcessing()
}
    }
    ReaderPlugin <|- - ObservablePlugin : extends
    CardReader <|- - ObservableReader : extends
  }

  PluginFactory "*" -down- "1" SmartCardService : registers <
  PluginFactory "1" - -> "1" ReaderPlugin : creates >
}

interface ReaderPlugin <<Plugin>>
interface ObservablePlugin <<Plugin>>
interface ReaderPoolPlugin <<Plugin>>
hide <<Plugin>> stereotype

interface CardReader <<Reader>>
interface ObservableReader <<Reader>>
hide <<Reader>> stereotype

skinparam class {
  BackgroundColor<<Plugin>> Azure
  BorderColor<<Plugin>> Blue
  BackgroundColor<<Reader>> #EEFFEE
  BorderColor<<Reader>> Green
}
@enduml

PlantUML version 1.2020.09(Sun May 10 14:51:06 MUT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.7+10-b765.64
Operating System: Windows 10
Default Encoding: Cp1252
Language: fr
Country: FR
--></g></svg>